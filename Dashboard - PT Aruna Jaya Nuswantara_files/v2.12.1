(()=>{var e={592:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var n={PREFIX:"LOU",BUILDER_MAINFRAME:"LOU_BUILDER_MAINFRAME",BUILDER_CONTENT_SCRIPT:"LOU_BUILDER_CONTENT_SCRIPT",PLAYER_MAINFRAME:"LOU_PLAYER_MAINFRAME",PLAYER_SCRIPT:"LOU_PLAYER_SCRIPT",PLAYER_SCRIPT_RESPONSE:"LOU_PLAYER_SCRIPT_RESPONSE"},s={PLAYER:{SCRIPT_ID:"louViewer",MAINFRAME_ID:"LOU_PLAYER_MAINFRAME",HOTSPOT_TOOLTIP_FRAME_ID:"LOU_PLAYER_HOTSPOT_TOOLTIP",STYLESHEET_ID:"LOU_PLAYER_STYLESHEET"},BUILDER:{MAINFRAME_ID:"LOU_BUILDER_MAINFRAME",TRIGGER_ID:"LOU_BUILDER_TRIGGER"},CSS:{THEME_COLOR:"--theme-color",HIGHLIGHT_CLASS:"lou__highlight",BLINK_CLASS:"lou__blink",HOTSPOT_CLASS:"lou__hotspot",BLINK_ANIMATION:"lou__blink--animation",HOTSPOT_PULSE_ANIMATION:"lou__hotspot--pulse-animation",HOTSPOT_RING_ANIMATION:"lou__hotspot--ring-animation"}},o={ENTER_BUILDER_MODE:"LOU_ENTER_BUILDER_MODE",EXIT_BUILDER_MODE:"LOU_EXIT_BUILDER_MODE",OPEN_BUILDER:"LOU_OPEN_BUILDER",CLOSE_BUILDER:"LOU_CLOSE_BUILDER",BUILDER_INSTALLED:"LOU_BUILDER_INSTALLED",BUILDER_SET_THEME_COLOR:"LOU_BUILDER_SET_THEME_COLOR",BUILDER_UPDATE_COMPANY:"LOU_BUILDER_UPDATE_COMPANY",BUILDER_SELECT_ELEMENT:"LOU_BUILDER_SELECT_ELEMENT",BUILDER_CANCEL_SELECT_ELEMENT:"LOU_BUILDER_CANCEL_SELECT_ELEMENT",BUILDER_HIGHLIGHT_STEP:"LOU_BUILDER_HIGHLIGHT_STEP",BUILDER_CANCEL_HIGHLIGHT_STEP:"LOU_BUILDER_CANCEL_HIGHLIGHT_STEP",BUILDER_GET_LOCATION_HREF:"LOU_BUILDER_GET_LOCATION_HREF",BUILDER_POSITION_HOTSPOT:"LOU_BUILDER_POSITION_HOTSPOT",BUILDER_MOUNT_HOTSPOT:"LOU_BUILDER_MOUNT_HOTSPOT",BUILDER_UNMOUNT_HOTSPOT:"LOU_BUILDER_UNMOUNT_HOTSPOT",BUILDER_CANCEL_POSITION_HOTSPOT:"LOU_BUILDER_CANCEL_POSITION_HOTSPOT",BUILDER_REDIRECT_TO_URL:"BUILDER_REDIRECT_TO_URL",SET_BUILDER_IS_ACTIVE:"LOU_SET_BUILDER_IS_ACTIVE",EXTENSION_VERSION:"LOU_EXTENSION_VERSION",BUILD_NEW_TUTORIAL:"BUILD_NEW_TUTORIAL",PLAYER_MOUNTED:"LOU_PLAYER_MOUNTED",OPEN_PLAYER:"LOU_OPEN_PLAYER",CLOSE_PLAYER:"LOU_CLOSE_PLAYER",UPDATE_PLAYER_HEIGHT:"LOU_UPDATE_PLAYER_HEIGHT",UPDATE_PLAYER_WIDTH:"LOU_UPDATE_PLAYER_WIDTH",TOP_FIVE_SUSPECTS:"LOU_TOP_FIVE_SUSPECTS",STEP_HAS_ERROR:"LOU_STEP_HAS_ERROR",SET_PLAYER_MODIFICATIONS:"LOU_SET_PLAYER_MODIFICATIONS",SET_TRIGGER_HIDDEN:"LOU_SET_TRIGGER_HIDDEN",NEXT_BUTTON_CLICK:"LOU_NEXT_BUTTON_CLICK",ENTER_TUTORIAL:"LOU_ENTER_TUTORIAL",EXIT_TUTORIAL:"LOU_EXIT_TUTORIAL",CLEAR_TUTORIAL:"LOU_CLEAR_TUTORIAL",CLEAR_TUTORIAL_VIEW:"LOU_CLEAR_TUTORIAL_VIEW",CLEAR_TUTORIAL_VIEWS:"LOU_CLEAR_TUTORIAL_VIEWS",REFRESH_TUTORIALS:"LOU_REFRESH_TUTORIALS",RUN_TUTORIAL_WITH_ID:"LOU_RUN_TUTORIAL_WITH_ID",RUN_TUTORIAL_WITH_DATA:"LOU_RUN_TUTORIAL_WITH_DATA",RUN_TUTORIAL_WITH_LINK:"LOU_RUN_TUTORIAL_WITH_LINK",RUN_TUTORIAL_STEP:"LOU_RUN_TUTORIAL_STEP",RUN_TUTORIAL_FEEDBACK_STEP:"LOU_RUN_TUTORIAL_FEEDBACK_STEP",SET_TOOLTIP_STYLE:"LOU_SET_TOOLTIP_STYLE",MOUNT_HOTSPOT:"LOU_MOUNT_HOTSPOT",UNMOUNT_HOTSPOT:"LOU_UNMOUNT_HOTSPOT",MOUNT_HOTSPOTS:"LOU_MOUNT_HOTSPOTS",UNMOUNT_HOTSPOTS:"LOU_UNMOUNT_HOTSPOTS",UPDATE_HOTSPOT_TOOLTIP_HEIGHT:"LOU_UPDATE_HOTSPOT_TOOLTIP_HEIGHT",UPDATE_HOTSPOT_TOOLTIP_POSITION:"LOU_UPDATE_HOTSPOT_TOOLTIP_POSITION",HOTSPOT_MOUSE_OVER:"LOU_HOTSPOT_MOUSE_OVER",HOTSPOT_MOUSE_OUT:"LOU_HOTSPOT_MOUSE_OUT",SHOW_TRIGGER:"LOU_SHOW_TRIGGER",HIDE_TRIGGER:"LOU_HIDE_TRIGGER",HANDLE_TRIGGER_CLICK:"LOU_HANDLE_TRIGGER_CLICK",UPDATE_LOCATION_HREF:"LOU_UPDATE_LOCATION_HREF",UPDATE_THEME_COLOR:"LOU_UPDATE_THEME_COLOR",ADD_SESSION_USER_ID:"LOU_ADD_SESSION_USER_ID",ADD_SESSION_USER_PROPERTIES:"LOU_ADD_SESSION_USER_PROPERTIES",UPDATE_SESSION_USER_OBJ:"LOU_UPDATE_SESSION_USER_OBJ",REFRESH_ACTIVE_TAB:"LOU_REFRESH_ACTIVE_TAB",START_TUTORIAL_EVENT:"LOU_START_TUTORIAL_EVENT",COMPLETE_TUTORIAL_EVENT:"LOU_COMPLETE_TUTORIAL_EVENT",EXIT_TUTORIAL_EVENT:"LOU_EXIT_TUTORIAL_EVENT",COMPLETE_TUTORIAL_STEP_EVENT:"LOU_COMPLETE_TUTORIAL_STEP_EVENT",OPEN_HELP_CENTER_EVENT:"LOU_OPEN_HELP_CENTER_EVENT",CLOSE_HELP_CENTER_EVENT:"LOU_CLOSE_HELP_CENTER_EVENT",SEARCH_HELP_CENTER_EVENT:"LOU_SEARCH_HELP_CENTER_EVENT",FEEDBACK_VOTE_EVENT:"LOU_FEEDBACK_VOTE_EVENT",FEEDBACK_EXIT_EVENT:"LOU_FEEDBACK_EXIT_EVENT",VIEW_HOTSPOT_EVENT:"LOU_VIEW_HOTSPOT_EVENT",CLOSE_HOTSPOT_EVENT:"LOU_CLOSE_HOTSPOT_EVENT"},r={COMPANY_ID:"LOU_ACTIVE_COMPANY_ID",FOLDER_ID:"LOU_ACTIVE_FOLDER_ID",ACTIVE_TUTORIAL:"LOU_ACTIVE_TUTORIAL",STEP_NUMBER:"LOU_ACTIVE_TUTORIAL_STEP_NUMBER",REDIRECT_ON_START:"LOU_TUTORIAL_REDIRECT_ON_START",SESSION_USER_ID:"LOU_SESSION_USER_ID",SESSION_USER_OBJ:"LOU_SESSION_USER_OBJ",SESSION_USER_DATA:"LOU_SESSION_USER_DATA",TUTORIAL_SESSION_ID:"LOU_TUTORIAL_SESSION_ID",THEME_COLOR:"LOU_THEME_COLOR",BUILDER_IS_OPEN:"LOU_BUILDER_IS_OPEN",BUILDER_ACTIVE_PAGE:"LOU_BUILDER_ACTIVE_PAGE",BUILDER_ACTIVE_PAGE_PROPS:"LOU_BUILDER_ACTIVE_PAGE_PROPS",PLAYER_STATE:"LOU_PLAYER_STATE",TRIGGER_TEXT:"LOU_TRIGGER_TEXT",HIDE_TRIGGER:"LOU_HIDE_TRIGGER",TUTORIAL_VIEWS:"LOU_USER_TUTORIAL_VIEWS",HOTSPOT_VIEWS:"LOU_USER_HOTSPOT_VIEWS",FOLDER_VIEWS:"LOU_USER_FOLDER_VIEWS"},a={COLORS:{PINK:"#FF4081"}},l={MODAL:"modal",TOOLTIP:"tooltip",HOTSPOT:"hotspot",HIGHLIGHT:"highlight",FEEDBACK:"feedback",BANNER:"banner"},c={LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",NONE:"none"},d={TOP_LEFT:"top_left",TOP_CENTER:"top_center",TOP_RIGHT:"top_right",CENTER_LEFT:"center_left",CENTER_CENTER:"center_center",CENTER_RIGHT:"center_right",BOTTOM_LEFT:"bottom_left",BOTTOM_CENTER:"bottom_center",BOTTOM_RIGHT:"bottom_right",BANNER_BOTTOM:"banner_bottom",BANNER_TOP:"banner_top"},p={ADVANCE_STEP_AND_TRIGGER_ELEMENT_CLICK:"advance_step_and_trigger_element_click",ADVANCE_STEP_AND_SUPPRESS_ELEMENT_CLICK:"advance_step_and_suppress_element_click",NO_ACTION:"no_action"},h={ADVANCE_STEP_AND_TRIGGER_ELEMENT_CLICK:"advance_step_and_trigger_element_click",ADVANCE_STEP_AND_SUPPRESS_ELEMENT_CLICK:"advance_step_and_suppress_element_click",NO_ACTION:"no_action"},_={SMALL:"small",DEFAULT:"default",LARGE:"large"};i.d(t,"HOSTS",(function(){return n})),i.d(t,"IDS",(function(){return s})),i.d(t,"MESSAGE_TYPES",(function(){return o})),i.d(t,"STORAGE",(function(){return r})),i.d(t,"VALUES",(function(){return a})),i.d(t,"STEP_TYPES",(function(){return l})),i.d(t,"STEP_BUTTON_SIZES",(function(){return _})),i.d(t,"STEP_CARET_DIRECTIONS",(function(){return c})),i.d(t,"STEP_ELEMENT_CLICK_ACTIONS",(function(){return h})),i.d(t,"STEP_NEXT_BUTTON_ACTIONS",(function(){return p})),i.d(t,"STEP_PLACEMENTS",(function(){return d}))}])},705:(e,t,i)=>{var n=i(639).Symbol;e.exports=n},932:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,s=Array(n);++i<n;)s[i]=t(e[i],i,e);return s}},239:(e,t,i)=>{var n=i(705),s=i(607),o=i(333),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?s(e):o(e)}},531:(e,t,i)=>{var n=i(705),s=i(932),o=i(469),r=i(448),a=n?n.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return s(t,e)+"";if(r(t))return l?l.call(t):"";var i=t+"";return"0"==i&&1/t==-1/0?"-0":i}},957:(e,t,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;e.exports=n},607:(e,t,i)=>{var n=i(705),s=Object.prototype,o=s.hasOwnProperty,r=s.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),i=e[a];try{e[a]=void 0;var n=!0}catch(e){}var s=r.call(e);return n&&(t?e[a]=i:delete e[a]),s}},333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},639:(e,t,i)=>{var n=i(957),s="object"==typeof self&&self&&self.Object===Object&&self,o=n||s||Function("return this")();e.exports=o},522:(e,t,i)=>{var n=i(833),s=/[\\^$.*+?()[\]{}|]/g,o=RegExp(s.source);e.exports=function(e){return(e=n(e))&&o.test(e)?e.replace(s,"\\$&"):e}},469:e=>{var t=Array.isArray;e.exports=t},5:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},448:(e,t,i)=>{var n=i(239),s=i(5);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==n(e)}},833:(e,t,i)=>{var n=i(531);e.exports=function(e){return null==e?"":n(e)}},774:function(e,t){!function(e){"use strict";function t(e,t,i,n){var s,o=!1,r=0;function a(){s&&clearTimeout(s)}function l(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var p=this,h=Date.now()-r;function _(){r=Date.now(),i.apply(p,c)}function u(){s=void 0}o||(n&&!s&&_(),a(),void 0===n&&h>e?_():!0!==t&&(s=setTimeout(n?u:_,void 0===n?e-h:e)))}return"boolean"!=typeof t&&(n=i,i=t,t=void 0),l.cancel=function(){a(),o=!0},l}e.debounce=function(e,i,n){return void 0===n?t(e,i,!1):t(e,n,!1!==i)},e.throttle=t,Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=["accessKey","childElementCount","classList","className","offsetHeight","offsetLeft","offsetWidth","offsetTop","clientHeight","clientLeft","clientWidth","clientTop","contentEditable","dir","id","innerHTML","innerText","isContentEditable","nodeName","nodeType","nodeValue","scrollHeight","scrollLeft","scrollTop","scrollWidth","tabIndex","tagName","textContent","title","xPath"],t={accessKey:.1,childElementCount:1,className:1,clientHeight:.5,clientLeft:.5,clientWidth:1,clientTop:.5,contentEditable:.1,dir:.1,id:5,innerHTML:2,innerText:5,isContentEditable:.1,lang:.1,namespaceURI:.1,nodeName:.5,nodeType:.5,nodeValue:.3,offsetHeight:.2,offsetWidth:1,offsetLeft:.2,offsetTop:.2,scrollHeight:1,scrollLeft:.2,scrollTop:.2,scrollWidth:1,tabIndex:.1,tagName:1,textContent:2,title:.5,backgroundColor:1,border:1,color:1,font:1,fontSize:.5,height:.3,width:.3},n=["h1","h2","h3","h4","h5","h6"],s={a:["a","button"],abbr:["abbr"],address:["address"],area:["area"],article:["article"],aside:["aside"],audio:["audio"],b:["b","strong","em"],base:["base"],bdi:["bdi"],bdo:["bdo"],blockquote:["blockquote"],body:["body"],br:["br"],button:["button","a"],canvas:["canvas"],caption:["caption"],cite:["cite"],code:["code"],col:["col","colgroup"],colgroup:["colgroup","col"],data:["data"],datalist:["datalist"],dd:["dd"],del:["del"],details:["details"],dfn:["dfn"],dialog:["dialog"],div:["div","span"],dl:["dl","dt"],dt:["dt","dl"],em:["em","i","strong"],embed:["embed"],fieldset:["fieldset"],figure:["figure"],footer:["footer","div","span"],form:["form"],h1:["p",...n,"label"],h2:["p",...n,"label"],h3:["p",...n,"label"],h4:["p",...n,"label"],h5:["p",...n,"label"],h6:["p",...n,"label"],head:["head"],header:["header","div","span"],hgroup:["hgroup"],hr:["hr"],html:["html"],i:["i","em","strong"],iframe:["iframe"],img:["img","svg"],input:["input","textarea","button"],ins:["ins"],kbd:["kbd"],keygen:["keygen"],label:["label","p",...n],legend:["legend"],li:["li"],link:["link"],main:["main"],map:["map"],mark:["mark"],menu:["menu"],menuitem:["menuitem"],meta:["meta"],meter:["meter"],nav:["nav","header","div","span"],noscript:["noscript"],object:["object"],ol:["ol","ul"],optgroup:["optgroup"],option:["option","input","li"],output:["output"],p:["p",...n,"label"],param:["param"],pre:["pre"],progress:["progress"],q:["q"],rb:["rb"],rp:["rp"],rt:["rt"],rtc:["rtc"],ruby:["ruby"],s:["s"],samp:["samp"],script:["script"],section:["section","div","span"],select:["select","input","div"],small:["small","em"],source:["source"],span:["div","span","i","b","em","section"],strong:["strong","b","em"],style:["style"],sub:["sub"],summary:["summary"],sup:["sup"],table:["table"],tbody:["tbody"],td:["td"],template:["template"],textarea:["input","textarea"],tfoot:["tfoot"],th:["th"],thead:["thead"],time:["time"],title:["title"],tr:["tr"],track:["track"],u:["u"],ul:["ul","ol"],var:["var"],video:["video"],wbr:["wbr"],svg:["img","svg"],g:["g"],path:["path"],line:["line"],ellipse:["ellipse"]},o=e=>{if(""!==e.id)return'id("'+e.id+'")';if(e===document.body)return e.tagName;if(null===e.parentNode)return"";const t=e.parentNode.childNodes;let i=0;for(let n=0;n<t.length;n++){const s=t[n];if(s===e)return`${o(e.parentNode)}/${e.tagName}[${i+1}]`;1===s.nodeType&&s.tagName===e.tagName&&i++}return""},r=e=>Object.assign(Object.assign({},t),e||{}),a=(e,t)=>{const{attributes:i,style:n,weights:s}=e;return l(t,i,s)+c(t,n,s)+d(t,null==i?void 0:i.xPath)},l=(t,i,n)=>e.reduce(((e,s)=>i[s]==t[s]?e+1*r(n)[s]:e),0),c=(e,t,i)=>{const n=window.getComputedStyle(e);return Object.keys(t).reduce(((e,s)=>t[s]==n[s]?e+1*r(i)[s]:e),0)},d=(e,t)=>o(e)===t?5:0,p=e=>s[e.toLowerCase()].reduce(((e,t)=>[...e,...Array.from(document.getElementsByTagName(t))]),[]),h=e=>Array.from(document.getElementsByTagName(e)),_=e=>{const t=[];return e.split(" ").reduce(((e,i)=>{const n=u(document.getElementsByClassName(i),t);return t.push(i),[...e,...n]}),[])},u=(e,t)=>Array.from(e).reduce(((e,i)=>{const n="string"==typeof i.className?i.className.split(" "):[];let s=!0;return t.forEach((e=>{n.includes(e)&&(s=!1)})),s?[...e,i]:e}),[]),m=(e,t,i,n)=>{var s;const r=[];let a=!1;return i&&(i.mustMatch.forEach((i=>{var n;"xPath"!==i&&(null===(n=t.attributes)||void 0===n?void 0:n[i])!=e[i]&&(r.push(i),a=!0)})),i.mustMatch.includes("xPath")&&(null===(s=t.attributes)||void 0===s?void 0:s.xPath)!==o(e)&&(r.push("xPath"),a=!0)),a?{success:!0,hasError:!0,suspect:e,score:n,reasons:r}:{success:!0,hasError:!1,suspect:e,score:n}},E=(e,t)=>{var i,n;if(!e)return{success:!1,hasError:!0,reasons:["no element criteria specified"]};if(!(null==(n=e.attributes.id)?void 0:n.length)){const n=document.getElementById(null===(i=e.attributes)||void 0===i?void 0:i.id);if(n)return m(n,e,t,100)}const o=(e=>{var t;let i=[];return(null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase())in s?i=p(e.tagName):e.className&&(i=_(e.className)),0===i.length?h(e.tagName):i})(e.attributes).map((t=>({element:t,score:a(e,t)})));if(o.length>0){const i=o.reduce(((e,t)=>e.score>=t.score?e:t));return m(i.element,e,t,i.score)}return{success:!1,hasError:!0,reasons:["no element found"]}};var T;!function(e){e.Click="click",e.Hover="hover",e.PageLoad="page_load"}(T||(T={}));var g=i(592),O=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},f=function(){try{return parseInt(document.body.style.paddingTop,10)||0}catch(e){return 0}},L=["svg","g","rect","path","line","ellipse"],S=function(e){if(!e)return null;if(L.includes(e.tagName))return S(e&&e.parentElement);var t=getComputedStyle(e,null),i=t.getPropertyValue("overflow"),n=t.getPropertyValue("position");return"hidden"===i?S(e&&e.parentElement):"static"===n||"relative"===n?e:S(e&&e.parentElement)},I=function(e){var t=/(auto|scroll)/,i=function(e,t){return e&&null!==e.parentElement?i(e.parentElement,t.concat([e])):t},n=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},s=function(e){return t.test(function(e){return n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x")}(e))};return function(e){if(!e&&!e)return null;for(var t=i(e.parentElement,[]),n=0;n<t.length;n+=1)if(s(t[n])&&Math.ceil(t[n].scrollHeight)>Math.ceil(t[n].getBoundingClientRect().height))return t[n];return document.scrollingElement||document.documentElement}(e)},w=function(){var e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)},y=function(){var e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)},R=function(e){try{var t=sessionStorage.getItem(e);try{return JSON.parse(t)}catch(e){return t}}catch(e){return null}},v=function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}};const b=()=>{const e=R(g.STORAGE.SESSION_USER_OBJ),t=R(g.STORAGE.SESSION_USER_DATA);return e&&t?Object.assign(Object.assign({},t),{defaultUserProperties:Object.assign(Object.assign({},t.defaultUserProperties),e.defaultUserProperties),customUserProperties:Object.assign(Object.assign({},t.customUserProperties),e.customUserProperties)}):t&&!e?t:!t&&e?e:{}},U=()=>document.getElementById(g.IDS.PLAYER.MAINFRAME_ID),C=()=>document.getElementById(g.IDS.PLAYER.SCRIPT_ID),A=class{constructor(e){this.id="",this.type=e.type||"",this.payload=e.payload||{},this.data=e.data||{},this.origin=e?g.HOSTS.PLAYER_SCRIPT:""}createFromEvent(e){try{const t=JSON.parse(e.data);if(t.origin.indexOf(g.HOSTS.PREFIX)>-1){const{origin:e,type:i,id:n,payload:s}=t;this.origin=e,this.type=i,this.id=n,this.payload=s}}catch(e){return null}}generateResponse(){const e=this.origin,t=g.HOSTS.PLAYER_SCRIPT_RESPONSE,i={id:this.id,target:e,origin:t,type:this.type,data:this.data},n=U(),s=window.LOUWidgetManager.getFrame();return n&&e===g.HOSTS.PLAYER_MAINFRAME?e=>n.contentWindow.postMessage(JSON.stringify(Object.assign(Object.assign({},i),{payload:e})),"*"):s&&"LOU_WIDGET_MAINFRAME"===e?e=>s.contentWindow.postMessage(JSON.stringify(Object.assign(Object.assign({},i),{payload:e})),"*"):e=>window.postMessage(JSON.stringify(Object.assign(Object.assign({},i),{payload:e})),"*")}sendResponseReady(){const e=U();return Boolean(e)}send(){const{type:e,origin:t,payload:i}=this,n=U(),s=window.LOUWidgetManager&&window.LOUWidgetManager.getFrame();n&&n.contentWindow.postMessage(JSON.stringify({type:e,origin:t,payload:i}),"*"),s&&s.contentWindow.postMessage(JSON.stringify({type:e,origin:t,payload:i}),"*")}isFromLou(){return this.origin.indexOf(g.HOSTS.PREFIX)>-1}isFromBuilder(){return this.origin===g.HOSTS.BUILDER_CONTENT_SCRIPT||"LOU_BUILDER_CLIENT"===this.origin}isFromPlayer(){return this.origin===g.HOSTS.PLAYER_MAINFRAME||"LOU_WIDGET_MAINFRAME"===this.origin}};const N=()=>{let e=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(i=>{let n=16*Math.random();return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),("x"==i?n:7&n|8).toString(16)}))},x=(e,t,i)=>new Promise((n=>{t?(Object.keys(e).forEach((i=>t.style[i]=e[i])),i&&Object.keys(i).forEach((e=>t.style[e]=i[e])),n()):n()})),P=(e,t)=>{let i=!1;"#"==e[0]&&(e=e.slice(1),i=!0);let n=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return n+=t,s+=t,o+=t,n>255?n=255:n<0&&(n=0),s>255?s=255:s<0&&(s=0),o>255?o=255:o<0&&(o=0),(i?"#":"")+(1==n.toString(16).length?"0"+n.toString(16):n.toString(16))+(1==s.toString(16).length?"0"+s.toString(16):s.toString(16))+(1==o.toString(16).length?"0"+o.toString(16):o.toString(16))},k=e=>-1!==["input","textarea"].indexOf(e.toLowerCase()),D=e=>{const t=/(auto|scroll)/,i=(e,t)=>null===e.parentNode?t:i(e.parentNode,t.concat([e])),n=(e,t)=>getComputedStyle(e,null).getPropertyValue(t),s=e=>t.test((e=>n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x"))(e));return(e=>{if(!e)return;if(!(e instanceof HTMLElement||e instanceof SVGElement))return;const t=i(e.parentNode,[]);for(let e=0;e<t.length;e+=1)if(s(t[e])&&t[e].scrollHeight>t[e].getBoundingClientRect().height)return t[e];return document.scrollingElement||document.documentElement})(e)},M=e=>{if(!e)return;const t=e.split("//");return t.length<=1?void 0:t[1].split("/")[0]};function W(e,t=220){return e?(e=e.replace("#",""),(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=t?"#333333":"#FFFFFF"):"dark"}function H(e){let t;try{t=JSON.parse(e)}catch(i){t=e}return t}const B=e=>e instanceof Element||e instanceof SVGElement;var V=i(522),j=i.n(V);const G=()=>{let e=location.href;new MutationObserver((function(){location.href!==e&&(e=location.href,window.dispatchEvent(new Event("locationchange")))})).observe(document,{subtree:!0,childList:!0})},$=(e,t="",i=!1,n=null)=>{if(e.length){let s=t;i||(s=t.split("?")[0]),(e=>e.startsWith("http://")||e.startsWith("https://"))(e)||(n&&(e=`${n}${e}`),e.startsWith("*")||(s=s.replace("http://",""),s=s.replace("https://","")));const o="^"+j()(e).replace(/\\\*/g,"(.+)")+"$";return new RegExp(o).test(s)}return!0};var Y;!function(e){e.Production="production",e.Staging="staging"}(Y||(Y={}));const F=class{constructor(e){this.getFormattedUserData=()=>({userId:this.userId||this.trackedUserId,properties:Object.assign(Object.assign({},this.defaultUserProperties),this.customUserProperties)});const t=C(),i=t?t.getAttribute("company-id"):null,n=document.URL||document.referrer,s=function(){let e,t,i,n=navigator.userAgent,s=navigator.appName,o=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);const a=function(){let e,t,i,n=window.navigator,s=["language","browserLanguage","systemLanguage","userLanguage"],o=null;if(Array.isArray(n.languages))for(e=0;e<n.languages.length;e++)if(t=n.languages[e],i=t.length,!o&&i&&(o=t),t&&i>2)return t;for(e=0;e<s.length;e++)if(t=n[s[e]],null!=t&&(i=t.length,!o&&i&&(o=t),t&&i>2))return t;return o}(),l=Intl.DateTimeFormat().resolvedOptions().timeZone;return-1!=(t=n.indexOf("OPR/"))?(s="Opera",o=n.substring(t+4)):-1!=(t=n.indexOf("Opera"))?(s="Opera",o=n.substring(t+6),-1!=(t=n.indexOf("Version"))&&(o=n.substring(t+8))):-1!=(t=n.indexOf("MSIE"))?(s="Microsoft Internet Explorer",o=n.substring(t+5)):-1!=(t=n.indexOf("Chrome"))?(s="Chrome",o=n.substring(t+7)):-1!=(t=n.indexOf("Safari"))?(s="Safari",o=n.substring(t+7),-1!=(t=n.indexOf("Version"))&&(o=n.substring(t+8))):-1!=(t=n.indexOf("Firefox"))?(s="Firefox",o=n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(s=n.substring(e,t),o=n.substring(t+1),s.toLowerCase()==s.toUpperCase()&&(s=navigator.appName)),-1!=(i=o.indexOf(";"))&&(o=o.substring(0,i)),-1!=(i=o.indexOf(" "))&&(o=o.substring(0,i)),r=parseInt(""+o,10),isNaN(r)&&(o=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),{name:s,fullVersion:""+o,majorVersion:""+r,appName:navigator.appName,userAgent:navigator.userAgent,width:window.innerWidth,language:a,timezone:l}}();this.activeWidgetBlocksState=e.activeWidgetBlocksState||null,this.activeWidgetId=e.activeWidgetId||null,this.applicationId=e.applicationId||null,this.hostname=e.hostname||M(n),this.browserLanguage=s.language,this.browserName=s.name,this.browserTimezone=s.timezone,this.browserVersion=s.fullVersion,this.browserWidth=s.width,this.builderIsActive=e.builderIsActive||!1,this.companyId=i,this.customUserProperties=Object.assign(Object.assign({},e.customUserProperties||{}),e.properties||{}),this.defaultUserProperties=e.defaultUserProperties||{},this.environment=e.environment||null,this.location=n,this.referrer=e.location||null,this.sessionUserId=e.sessionUserId||null,this.splitTestWorkflows=e.splitTestWorkflows||{},this.trackedUserId=e.trackedUserId||null,this.userId=e.userId||null,this.initLocationChangeListener(),this.saveSessionUserDataToStorage()}updateSessionUserData(e){const t=Object.keys(e);t.forEach((t=>{const i="object"==typeof this[t],n="object"==typeof e[t];if("customUserProperties"===t&&i&&n)this[t]=Object.assign(Object.assign({},this[t]),e[t]);else if("defaultUserProperties"===t&&i&&n){const i=this[t],n=e[t],s={},o=["pageviews","sessions","tours_started","tours_completed"];Object.keys(e[t]).forEach((e=>{o.includes(e)?s[e]=Math.max(n[e]||0,i[e]||0):s[e]=n[e]})),this[t]=Object.assign(Object.assign({},this[t]),s)}else this[t]=e[t]})),this.saveSessionUserDataToStorage(),t.filter((e=>["activeWidgetId","activeWidgetBlocksState","defaultUserProperties"].includes(e))).length!==t.length&&this.fetchExperiences()}identify(e,t){let i=!1;return e&&e!==this.userId&&(this.userId=e,i=!0),t&&JSON.stringify(t)!==JSON.stringify(this.customUserProperties)&&(this.customUserProperties=Object.assign(Object.assign({},this.customUserProperties),t),i=!0),i&&(this.saveSessionUserDataToStorage(),this.fetchExperiences()),this.getFormattedUserData()}updateWorkflowViewHistory(e,t){const i=this.defaultUserProperties[`tours_${t}`]||0,n=this.defaultUserProperties[`tours_${t}_history`]||{};n[e]=n[e]?n[e]+1:1,this.defaultUserProperties=Object.assign(Object.assign({},this.defaultUserProperties),{[`tours_${t}`]:i+1,[`tours_${t}_history`]:n}),this.saveSessionUserDataToStorage()}updateApplicationEnvironment(){let e;const t=R("LOU_SUBSCRIPTION_APPLICATIONS")||[];try{const i=t.find((t=>{const{stagingEnvironmentDomain:i,productionEnvironmentDomain:n}=t;return $(n,this.hostname)?(e=Y.Production,t):$(i,this.hostname)?(e=Y.Staging,t):null}));this.applicationId=null==i?void 0:i.randomApplicationId,this.environment=e}catch(e){}}setApplicationEnvironment(){this.updateApplicationEnvironment(),this.saveSessionUserDataToStorage()}updateLocation(e){if(e!==this.location){this.referrer=this.location,this.location=e;const t=M(e);t!==this.hostname&&(this.hostname=t,this.updateApplicationEnvironment()),this.defaultUserProperties.pageviews+=1}}setBuilderIsActive(e){e?this.builderIsActive=!0:(this.builderIsActive=!1,this.sessionUserId=null),this.saveSessionUserDataToStorage(),this.fetchExperiences()}initLocationChangeListener(){window.addEventListener("locationchange",(e=>{const{path:t,target:i}=e,n=t?t[0].location.href:i.location.href;window.LOUStepManager.checkForUncontrolledRedirect(),this.activeWidgetId&&!window.LOUWidgetManager.isMounted&&window.LOUWidgetManager.mount({randomWidgetId:this.activeWidgetId}),this.updateLocation(n),this.saveSessionUserDataToStorage(),this.fetchExperiences()}))}fetchExperiences(){new A({type:g.MESSAGE_TYPES.REFRESH_TUTORIALS,payload:{sessionObj:Object.assign({},this)}}).send()}saveSessionUserDataToStorage(){v(g.STORAGE.SESSION_USER_DATA,Object.assign({},this)),new A({type:"LOU_SET_SESSION_USER_DATA",payload:{sessionObj:Object.assign({},this)}}).send()}clearActiveWidgetBlocksState(){this.activeWidgetBlocksState=null,this.saveSessionUserDataToStorage()}};var z,K;(K=z||(z={})).Completed="completed",K.Quit="quit",K.Viewed="viewed";const X=(e,t)=>{const i=Date.now(),n={id:N(),eventType:z.Viewed,timestamp:i};return t&&t[e]?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{views:t[e].views+1,last_viewed_at:i,events:[...t[e].events||[],n]})}):Object.assign(Object.assign({},t),{[e]:{views:1,completions:0,first_viewed_at:i,last_viewed_at:i,events:[n]}})},J=(e,...t)=>window.LOU&&window.LOU[e]&&window.LOU[e](...t),q=class{constructor(e){this.User=new F(e?{builderIsActive:e}:b()),this.builderIsActive=e,this.listener=null}listen(e="all",t){this.listener=i=>{const{detail:{type:n}}=i;("all"===e||e===n)&&t(i)},window.addEventListener("LOU_EVENT",this.listener)}stopListening(){this.listener&&(window.removeEventListener("LOU_EVENT",this.listener),this.listener=null)}identify(e=null,t=null){return e||t?!e&&t?this.User.identify(null,t):"string"==typeof(i=e)||i instanceof String||"number"==typeof e||t?this.User.identify(function(e){switch(typeof e){case"object":return"object";case"function":return"function";default:return e.toString()}}(e),t):this.User.identify(null,e):this.User.getFormattedUserData();var i}track(e,t){new A({type:"LOU_SDK_TRACK_EVENT",payload:{eventName:e,eventData:t}}).send()}privateTrack(e,t,i){new A({type:"LOU_SDK_TRACK_EVENT",payload:Object.assign({eventName:e,eventData:t},i)}).send()}user(){return this.User.getFormattedUserData()}startTour(e,t=!0,i=!0){new A({type:g.MESSAGE_TYPES.RUN_TUTORIAL_WITH_ID,payload:{tutorialId:e,includeViewRules:t,includeSegmentation:i}}).send()}startTutorial(e){this.startTour(e)}launchWidget(e,t=!0,i=!0){var n,s;t&&0!==((e,t)=>{const i=Date.now();return t&&t[e]||{views:0,completions:0,first_completed_at:i,first_viewed_at:i,last_completed_at:i,last_viewed_at:i,events:[]}})(e,null===(s=null===(n=this.User)||void 0===n?void 0:n.defaultUserProperties)||void 0===s?void 0:s.widgets_history).views||window.LOUWidgetManager.mount({randomWidgetId:e},!0,i)}navigateTo(e){window.location.href=e}refresh(){this.User.fetchExperiences()}clearViewHistory(){new A({type:g.MESSAGE_TYPES.CLEAR_TUTORIAL_VIEWS}).send(),this.User.clearActiveWidgetBlocksState()}},Z=e=>{switch(e){case T.Hover:return"mouseenter";case T.Click:default:return"click"}};var Q,ee,te;!function(e){e.TourStarted="tour_started",e.TourCompleted="tour_completed",e.TourExited="tour_exited",e.TourSuppressedAction="tour_suppressed_action",e.TourSuppressedBySplitTest="tour_suppressed_by_split_test",e.TourStepViewed="tour_step_viewed",e.TourStepCompleted="tour_step_completed",e.SurveyViewed="survey_viewed",e.SurveyCompleted="survey_completed",e.SurveyExited="survey_exited",e.WidgetLaunched="widget_launched",e.WidgetClosed="widget_closed",e.WidgetCompleted="widget_completed",e.WidgetOpened="widget_opened",e.WidgetBlockCompleted="widget_block_completed",e.ViewHistoryReset="view_history_reset"}(Q||(Q={})),function(e){e.PlayerOpened="OPEN_PLAYER",e.PlayerClosed="CLOSE_PLAYER",e.PlayerSearched="SEARCH_PLAYER",e.WorkflowViewed="START_TOUR",e.WorkflowCompleted="COMPLETE_TOUR",e.WorkflowExited="EXIT_TOUR",e.WorkflowStepViewed="VIEWED_TOUR_STEP",e.WorkflowStepCompleted="COMPLETE_TOUR_STEP",e.SurveyViewed="SURVEY_VIEWED",e.SurveyCompleted="SURVEY_COMPLETED",e.SurveyExited="SURVEY_EXITED",e.WidgetLaunched="LAUNCH_WIDGET",e.WidgetCompleted="COMPLETE_WIDGET",e.WidgetOpened="OPEN_WIDGET",e.WidgetClosed="CLOSE_WIDGET",e.WidgetBlockCompleted="COMPLETE_WIDGET_BLOCK"}(ee||(ee={})),function(e){e.Url="url",e.HelpWidget="help_widget",e.Link="link",e.SDKFunction="sdk_function",e.Builder="builder"}(te||(te={}));const ie={[ee.PlayerOpened]:{name:"Opened Help Center"},[ee.PlayerClosed]:{name:"Closed Help Center"},[ee.PlayerSearched]:{name:"Searched In Help Center"},[ee.WorkflowViewed]:{name:"Started Tour"},[ee.WorkflowCompleted]:{name:"Completed Tour"},[ee.WorkflowExited]:{name:"Quit Tour"},[ee.WorkflowStepViewed]:{name:"Viewed Tour Step"},[ee.WorkflowStepCompleted]:{name:"Completed Tour Step"},[ee.SurveyViewed]:{name:"Viewed Survey Step"},[ee.SurveyCompleted]:{name:"Completed Survey Step"},[ee.SurveyExited]:{name:"Quit Survey Step"},[ee.WidgetLaunched]:{name:"Launched Widget"},[ee.WidgetCompleted]:{name:"Completed Widget"},[ee.WidgetOpened]:{name:"Opened Widget"},[ee.WidgetClosed]:{name:"Closed Widget"},[ee.WidgetBlockCompleted]:{name:"Completed Widget Block"}},ne=class{constructor(e,t={}){this.type=e,this.name=ie[e].name,this.data=Object.assign({ORIGIN:"LOU"},t)}getPrimaryField(){switch(this.type){case ee.PlayerOpened:case ee.PlayerClosed:return"";case ee.PlayerSearched:return`Searched for: "${this.data.search_term}"`;case ee.WorkflowViewed:case ee.WorkflowCompleted:return`${this.data.experience_title} (${this.data.experience_id})`;case ee.WorkflowExited:case ee.WorkflowStepViewed:case ee.WorkflowStepCompleted:return`Step ${this.data.experience_step_number} (${this.data.experience_step_title}) - ${this.data.experience_title}`;case ee.SurveyViewed:case ee.SurveyCompleted:case ee.SurveyExited:return`Survey Step: ${this.data.experience_step_number} (${this.data.experience_step_title}) - ${this.data.experience_title}`;case ee.WidgetLaunched:case ee.WidgetCompleted:case ee.WidgetOpened:case ee.WidgetClosed:return`Widget: ${this.data.widget_title} (${this.data.widget_id})`;case ee.WidgetBlockCompleted:return`Widget Block: ${this.data.widget_block_number} (${this.data.widget_block_id})`;default:return null}}dispatch(){const e=new CustomEvent("LOU_EVENT",{detail:{type:this.type,name:`LOU - ${this.name}`,data:this.data,primaryField:this.getPrimaryField()}});window.dispatchEvent(e)}},se="2147483647",oe={border:"none",colorScheme:"none"},re={BUTTON_HIDDEN:Object.assign({width:"100%",maxWidth:"500px",height:"0px",maxHeight:"50px",position:"fixed",top:"auto",bottom:"0",left:"auto",right:"0",margin:"0px",zIndex:se,visibility:"hidden",transform:"none"},oe),BUTTON_CLOSED:Object.assign({width:"100%",maxWidth:"500px",height:"100%",maxHeight:"50px",position:"fixed",top:"auto",bottom:"15px",left:"auto",right:"15px",margin:"0px",zIndex:se,visibility:"visible",transform:"none"},oe),BUTTON_OPEN:Object.assign({width:"100%",maxWidth:"500px",height:"100%",maxHeight:"500px",position:"fixed",top:"auto",bottom:"15px",left:"auto",right:"15px",margin:"0px",zIndex:se,visibility:"visible",transform:"none"},oe),ACTIVE_TUTORIAL_FRAME:Object.assign({position:"fixed",width:"100%",maxHeight:"700px",visibility:"visible",zIndex:se},oe)},ae={HIDDEN:Object.assign({position:"absolute",bottom:"-1px",left:"0px",top:"auto",right:"auto",width:"100%",maxWidth:"0px",maxHeight:"0px",zIndex:"-1",transform:"none"},oe),VISIBLE:Object.assign({position:"absolute",top:"auto",bottom:"auto",left:"auto",right:"auto",width:"100%",maxWidth:"350px",maxHeight:"700px",zIndex:se,transform:"none"},oe)};var le;!function(e){e.Track="track",e.Identify="identify"}(le||(le={}));var ce,de,pe,he,_e,ue,me,Ee,Te,ge,Oe=i(774);!function(e){e.HIDDEN="PLAYER_HIDDEN",e.CLOSED="PLAYER_CLOSED",e.OPEN="PLAYER_OPEN",e.ACTIVE="PLAYER_ACTIVE"}(ce||(ce={})),function(e){e.Widget="Widget",e.Trigger="Trigger",e.CompletionMessage="CompletionMessage",e.None="None"}(de||(de={})),function(e){e.Checklist="Checklist",e.HelpCenter="HelpCenter"}(pe||(pe={})),function(e){e.IDLE="idle",e.LOADING="loading",e.SUCCEEDED="succeeded",e.FAILED="failed",e.RECEIVED="received"}(he||(he={})),function(e){e.COMPANY_ID="LOU_COMPANY_ID",e.FOLDER_ID="LOU_FOLDER_ID",e.ACTIVE_TUTORIAL="LOU_ACTIVE_TUTORIAL",e.STEP_NUMBER="LOU_TUTORIAL_ACTIVE_STEP_NUMBER",e.REDIRECT_ON_START="LOU_TUTORIAL_REDIRECT_ON_START",e.SESSION_USER_ID="LOU_SESSION_USER_ID",e.TUTORIAL_SESSION_ID="LOU_TUTORIAL_SESSION_ID",e.THEME_COLOR="LOU_ACTIVE_THEME_COLOR",e.TUTORIAL_VIEWS="LOU_TUTORIAL_VIEWS",e.FOLDER_VIEWS="LOU_FOLDER_VIEWS"}(_e||(_e={})),function(e){e.NEXT_BUTTON_CLICK="next_step_button_click",e.TARGET_ELEMENT_CLICK="target_element_click",e.WINDOW_ELEMENT_CLICK="window_element_click",e.EXIT_ICON_CLICK="exit_icon_click",e.OVERLAY_CLICK="overlay_click",e.FEEDBACK_VOTE="feedback_vote",e.LOCATION_CHANGE="location_change",e.UNINTENDED_LOCATION_CHANGE="unintended_location_change"}(ue||(ue={})),function(e){e.STATIC="static",e.DATA_ENTRY="data_entry",e.DATA_ENTRY_BUTTON="data_entry_button"}(me||(me={})),function(e){e.ShortAnswer="short_answer",e.YesNoVote="yes_no_vote",e.ZeroToTenScore="zero_to_ten_score"}(Ee||(Ee={})),function(e){e.Yes="yes",e.No="no"}(Te||(Te={})),function(e){e.Center="center",e.End="end",e.SpaceBetween="space-between",e.Start="start"}(ge||(ge={}));const fe=class{constructor(){const e=C();this.prevPlayerState=ce.HIDDEN,this.playerState=ce.HIDDEN,this.themeColor=e&&(e.getAttribute("themeColor")||e.getAttribute("theme-color"))||null,this.modifications={},this.triggerHidden=!1,this.mobileMediaQuery=767,this.resizeListener=null,this.mainframeTransformValue=null,this.init()}init(){try{const e=C(),t=e.getAttribute("folderId")||e.getAttribute("folder-id"),i=e.getAttribute("company-id"),n=!!e.getAttribute("builder"),s=R("LOU_SUBSCRIPTION_VALIDATION"),o=!0===R("LOU_SUBSCRIPTION_INCLUDE_BRANDING"),r=R("LOU_SUBSCRIPTION_INTEGRATIONS");i?"valid"===s||n?(this.setupMainframe(o),this.setupIntegrations(r)):s||fetch(`https://api.louassist.com/v1/assistant/public/company-subscription-check/${i}/`).then((e=>e.json().then((t=>({status:e.status,data:t}))))).then((({status:e,data:t})=>{200===e?(this.setupMainframe(t.includeBranding),this.setupIntegrations(t.integrations),v("LOU_SUBSCRIPTION_VALIDATION","valid"),v("LOU_SUBSCRIPTION_INCLUDE_BRANDING",t.includeBranding),v("LOU_SUBSCRIPTION_INTEGRATIONS",t.integrations),v("LOU_SUBSCRIPTION_THEME",t.theme),v("LOU_SUBSCRIPTION_APPLICATIONS",t.applications),new A({type:"LOU_UPDATE_THEME",payload:{theme:t.theme}}).send(),window.LOU.User.setApplicationEnvironment()):v("LOU_SUBSCRIPTION_VALIDATION","invalid")})):t&&this.setupMainframe()}catch(e){}}setupMainframe(e=!1){this.resizeListener=(0,Oe.debounce)(200,!1,(()=>this.onResize())),window.addEventListener("resize",this.resizeListener),((e,t=!1)=>{const i=C();if(!i)return null;const n=i.getAttribute("folderId")||i.getAttribute("folder-id"),s=i.getAttribute("company-id"),o=!!i.getAttribute("builder"),r=document.createElement("iframe");if(x(re.BUTTON_HIDDEN,r,e),r.id=g.IDS.PLAYER.MAINFRAME_ID,r.frameBorder="none",r.src=`https://viewer.louassist.com?folderId=${n}&companyId=${s}${o?"&builder=true":""}${t?"&includeBranding=true":""}`,r.setAttribute("allowFullScreen",""),document.body)document.getElementById(g.IDS.PLAYER.MAINFRAME_ID)||document.body.appendChild(r);else{const e=new MutationObserver((function(){document.body&&(document.getElementById(g.IDS.PLAYER.MAINFRAME_ID)||document.body.appendChild(r),e.disconnect())}));e.observe(document.documentElement,{childList:!0})}document.addEventListener("turbolinks:render",(()=>{document.body&&(document.getElementById(g.IDS.PLAYER.MAINFRAME_ID)||document.body.appendChild(r))}))})(this.modifications,e),window.addEventListener("webkitfullscreenchange",(()=>{const e=U();document.webkitFullscreenElement===e?(this.mainframeTransformValue=e.style.transform,e.style.transform=null):!e.style.transform&&this.mainframeTransformValue&&(e.style.transform=this.mainframeTransformValue,this.mainframeTransformValue=null)}))}setupIntegrations(e){e.find((({source:e})=>"segment"===e))&&window.analytics&&window.analytics.ready((()=>{window.analytics.addSourceMiddleware((({payload:e,next:t})=>{const{anonymousId:i,context:n,event:s,properties:o,traits:r,type:a,userId:l}=e.obj;switch(a){case le.Track:window.LOU.privateTrack(s,o,{eventSource:"segment"}),e.obj.context=Object.assign(Object.assign({},n),{handledByLouSdk:!0});break;case le.Identify:{const t=["ssn","ip","ip_address","ipAddress","first_name","firstName","last_name","lastName","name","full_name","fullName","email","phone","phone_number","phoneNumber"],s=Object.assign({},r);t.forEach((e=>delete s[e])),(l||i)&&window.LOU.identify(l||i,s),e.obj.context=Object.assign(Object.assign({},n),{handledByLouSdk:!0});break}}t(e)}))}))}open(){this.setPlayerState(ce.OPEN),new A({type:g.MESSAGE_TYPES.OPEN_PLAYER,payload:{sessionObj:b()}}).send()}close(){this.setPlayerState(ce.CLOSED)}toggle(e){!0===e?this.open():!1===e?this.close():this.playerState===ce.CLOSED||this.playerState===ce.HIDDEN?this.open():this.close()}show(){this.playerState!==ce.HIDDEN||this.triggerHidden||this.setPlayerState(ce.CLOSED)}hide(){this.playerState!==ce.ACTIVE&&this.setPlayerState(ce.HIDDEN)}enterDetail(e){U().style.height=e+"px"}updateHeight(e){const t=U();x({height:e+"px"},t),window.LOUStepManager&&window.LOUStepManager.targetElement&&window.LOUStepManager.targetElement.hotspot&&window.LOUStepManager.targetElement.hotspot.updateTooltipPosition()}updateWidth(e){const t=U();x({width:e},t)}enterTutorial(e){this.setPlayerState(ce.ACTIVE),v("LOU_FETCH_LOCATION",e),window.LOUOverlay.init()}exitTutorial(){this.setPlayerState(ce.CLOSED),v("LOU_FETCH_LOCATION",null),v("LOU_LATEST_LOCATION",null),window.LOUOverlay.cleanup()}checkForWorkflows(){J("getWorkflows")}setPlayerTheme(){const e=R("LOU_SUBSCRIPTION_THEME");e&&new A({type:"LOU_UPDATE_THEME",payload:{theme:e}}).send()}setPlayerState(e){const t=U();switch(e){case ce.HIDDEN:x(re.BUTTON_HIDDEN,t);break;case ce.CLOSED:x(re.BUTTON_CLOSED,t,this.modifications);break;case ce.OPEN:x(re.BUTTON_OPEN,t,this.modifications);break;case ce.ACTIVE:{const e=Object.assign(Object.assign({},this.modifications),{width:"100%"});this.modifications=e,x(re.ACTIVE_TUTORIAL_FRAME,t,e);break}}this.prevPlayerState=this.playerState,this.playerState=e}setModifications(e){this.modifications=Object.assign(Object.assign({},this.modifications),e)}setTriggerHidden(e){this.triggerHidden=e,this.hide()}onResize(){new A({type:"LOU_SCREEN_SIZE_UPDATED",payload:{width:window.innerWidth,height:window.innerHeight}}).send()}};var Le,Se,Ie,we,ye,Re,ve,be,Ue,Ce,Ae,Ne,xe,Pe;!function(e){e.Announcement="announcement",e.NPS="nps",e.Survey="survey",e.Tour="tour"}(Le||(Le={})),function(e){e.Banner="banner",e.Feedback="feedback",e.Highlight="highlight",e.Hotspot="hotspot",e.Modal="modal",e.Tooltip="tooltip"}(Se||(Se={})),function(e){e.CLICK="click",e.NONE="none"}(Ie||(Ie={})),function(e){e.PrimaryButtonClick="primary_button_click",e.SecondaryButtonClick="secondary_button_click",e.TargetElementClick="target_element_click",e.WindowElementClick="window_element_click",e.ExitIconClick="exit_icon_click",e.OverlayClick="overlay_click",e.FeedbackVote="feedback_vote",e.LocationChange="location_change"}(we||(we={})),function(e){e.AdvanceStepAndOpenUrlInNewTab="redirect_to_url_outside_workflow",e.AdvanceStepAndRedirectToUrl="advance_step_and_redirect_to_url",e.AdvanceStepAndSuppressElementClick="advance_step_and_suppress_element_click",e.AdvanceStepAndTriggerElementClick="advance_step_and_trigger_element_click",e.CloseWorkflow="close_workflow",e.NoAction="no_action",e.OpenUrlInNewTab="open_url_in_new_tab",e.PreviousStep="previous_step",e.PreviousStepAndNavigateToReferringUrl="previous_step_and_navigate_to_referring_url",e.PreviousStepAndNavigateToSpecificUrl="previous_step_and_navigate_to_specific_url",e.RedirectToUrl="redirect_to_url"}(ye||(ye={})),function(e){e.AdvanceStepAndTriggerElementClick="advance_step_and_trigger_element_click",e.AdvanceStepAndSuppressElementClick="advance_step_and_suppress_element_click",e.TriggerElementClickWithoutAdvancingStep="trigger_element_click_without_advancing_step",e.None="no_action"}(Re||(Re={})),function(e){e.RunCustomCode="run_custom_code",e.None="none"}(ve||(ve={})),function(e){e.Default="default",e.Large="large",e.Small="small"}(be||(be={})),function(e){e.TopLeft="top_left",e.TopCenter="top_center",e.TopRight="top_right",e.CenterLeft="center_left",e.CenterCenter="center_center",e.CenterRight="center_right",e.BottomLeft="bottom_left",e.BottomCenter="bottom_center",e.BottomRight="bottom_right",e.BannerBottom="banner_bottom",e.BannerTop="banner_top"}(Ue||(Ue={})),function(e){e.Bottom="bottom",e.Left="left",e.Right="right",e.Top="top",e.None="none"}(Ce||(Ce={})),function(e){e.Yes="yes",e.No="no"}(Ae||(Ae={})),function(e){e.ShortAnswer="short_answer",e.YesNoVote="yes_no_vote",e.ZeroToTenScore="zero_to_ten_score"}(Ne||(Ne={})),function(e){e.Center="center",e.End="end",e.SpaceBetween="space-between",e.Start="start"}(xe||(xe={})),function(e){e.Location="location",e.Referrer="referrer",e.Hostname="hostname",e.Pageviews="pageviews"}(Pe||(Pe={}));const ke=12,De=`\n    .LOU__celebration-container {\n        position: absolute;\n        transform: translate(-50%, -50%);\n        z-index: 99999999;\n        width: fit-content;\n        height: fit-content;\n    }\n\n    .LOU__firework-container {\n        position: relative;\n        width: fit-content;\n        height: fit-content;\n    }\n\n    .LOU__firework-container > i {\n        position: absolute;\n        display: block;\n        width: 2px;\n        height: 8px;\n        background: red;\n        opacity: 0;\n        z-index: 99999;\n    }\n\n    ${new Array(ke).fill(void 0).map(((e,t)=>`@keyframes LOU__firework__main__${t+1} {\n            0% {\n              opacity: 0;\n              height: 0px;   \n              transform: scale(1) rotate(${(t+1)/ke*360}deg) translate(0px, 0px);\n            }\n            50% {\n              height: 12px;\n              opacity: 1;\n            }\n            100% {\n              height: 0px;\n              opacity: 0;\n              transform: scale(1) rotate(${(t+1)/ke*360}deg) translate(0px, 100px);\n            }\n        }`)).join("")}\n\n      ${new Array(ke).fill(void 0).map(((e,t)=>`@keyframes LOU__firework__small_1__${t+1} {\n              0% {\n                opacity: 0;\n                height: 0px;   \n                transform: scale(0.6) rotate(${(t+1)/ke*360}deg) translate(0px, 0px);\n              }\n              50% {\n                height: 12px;\n                opacity: 1;\n              }\n              100% {\n                height: 0px;\n                opacity: 0;\n                transform: scale(0.6) rotate(${(t+1)/ke*360}deg) translate(0px, 100px);\n              }\n          }`)).join("")}\n\n        ${new Array(ke).fill(void 0).map(((e,t)=>`@keyframes LOU__firework__small_2__${t+1} {\n                0% {\n                  opacity: 0;\n                  height: 0px;   \n                  transform: scale(0.8) rotate(${(t+1)/ke*360}deg) translate(0px, 0px);\n                }\n                50% {\n                  height: 12px;\n                  opacity: 1;\n                }\n                100% {\n                  height: 0px;\n                  opacity: 0;\n                  transform: scale(0.8) rotate(${(t+1)/ke*360}deg) translate(0px, 100px);\n                }\n            }`)).join("")}\n\n          ${new Array(ke).fill(void 0).map(((e,t)=>`@keyframes LOU__firework__small_3__${t+1} {\n                  0% {\n                    opacity: 0;\n                    height: 0px;   \n                    transform: scale(0.4) rotate(${(t+1)/ke*360}deg) translate(0px, 0px);\n                  }\n                  50% {\n                    height: 12px;\n                    opacity: 1;\n                  }\n                  100% {\n                    height: 0px;\n                    opacity: 0;\n                    transform: scale(0.4) rotate(${(t+1)/ke*360}deg) translate(0px, 100px);\n                  }\n              }`)).join("")}\n\n            ${new Array(ke).fill(void 0).map(((e,t)=>`@keyframes LOU__firework__small_4__${t+1} {\n                    0% {\n                      opacity: 0;\n                      height: 0px;   \n                      transform: scale(0.5) rotate(${(t+1)/ke*360}deg) translate(0px, 0px);\n                    }\n                    50% {\n                      height: 12px;\n                      opacity: 1;\n                    }\n                    100% {\n                      height: 0px;\n                      opacity: 0;\n                      transform: scale(0.5) rotate(${(t+1)/ke*360}deg) translate(0px, 100px);\n                    }\n                }`)).join("")}\n`;function Me(e,t){const i=document.createElement("div");i.className="LOU__firework-container";const n=document.createDocumentFragment();for(let i=0;i<ke;i++){const o=`\n        left: 50%;\n        top: 50%;\n        background: hsla(${s=360,Math.random()*(s-0)+0},100%,50%,1);\n        animation: LOU__firework__${e}__${i+1} 800ms ease-out ${t}ms forwards;\n        opacity: 0;\n    `,r=document.createElement("i");r.style.cssText=o.toString(),n.appendChild(r)}var s;return i.appendChild(n),i}const We={page:10,target:10},He=(e,t,i=Ce.Bottom)=>{try{const{top:n,left:s,width:o,height:r}=t.getBoundingClientRect();return((e,t,i,n=Ce.Left,s={})=>{try{const o=Object.assign(Object.assign({},We),s),r=e.getBoundingClientRect(),a=t+w(),l=i+y(),c=f(),d=O(),p=document.body.clientWidth,h=o.page,_=o.target,u=24;let m,E,T,g;const L=()=>!(l+_+r.height+h>d||(E=Math.min(Math.max(h,a-r.width/2),p-r.width-h),m=l+_,g=Math.min(Math.max(a-(E+r.width/2),-1*(r.width/2-u)),r.width/2-u),T=Ce.Top,0)),S=()=>!(_+r.height+h+c>l||(E=Math.min(Math.max(h,a-r.width/2),p-r.width-h),m=l-_-r.height,g=Math.min(Math.max(a-(E+r.width/2),-1*(r.width/2-u)),r.width/2-u),T=Ce.Bottom,0)),I=()=>!(a>p-_-r.width-h||(m=Math.min(Math.max(h+c,l-r.height/2),d-r.height-h),E=a+_,g=Math.min(Math.max(l-(m+r.height/2),-1*(r.height/2-u)),r.height/2-u),T=Ce.Left,0)),R=()=>!(_+r.width+h>a||(m=Math.min(Math.max(h+c,l-r.height/2),d-r.height-h),E=a-_-r.width,g=Math.min(Math.max(l-(m+r.height/2),-1*(r.height/2-u)),r.height/2-u),T=Ce.Right,0));let v;switch(n){case Ce.Top:v=[L,S,I,R];break;case Ce.Bottom:v=[S,L,I,R];break;case Ce.Left:v=[I,R,S,L];break;case Ce.Right:v=[R,I,S,L]}for(let e=0;e<v.length&&!v[e]();e++);return{top:Math.max(5,m),left:Math.max(5,E),caretDirection:T,caretPosition:g}}catch(e){return{}}})(e,s+o/2,n+r/2,i,{target:0})}catch(e){return{}}};function Be(e){const t=f();switch(e){case"top_left":return{top:`${t+15}px`,left:"15px",bottom:"auto",right:"auto",transform:"none"};case"top_center":return{top:`${t+15}px`,left:"50%",bottom:"auto",right:"auto",transform:"translateX(-50%)"};case"top_right":return{top:`${t+15}px`,right:"15px",bottom:"auto",left:"auto",transform:"none"};case"center_left":return{top:"50%",left:"15px",bottom:"auto",right:"auto",transform:"translateY(-50%)"};case"center_center":return{top:"50%",left:"50%",bottom:"auto",right:"auto",transform:"translate(-50%, -50%)"};case"center_right":return{top:"50%",right:"15px",bottom:"auto",left:"auto",transform:"translateY(-50%)"};case"bottom_left":return{bottom:"15px",left:"15px",top:"auto",right:"auto",transform:"none"};case"bottom_center":return{bottom:"15px",left:"50%",top:"auto",right:"auto",transform:"translateX(-50%)"};case"bottom_right":return{bottom:"15px",right:"15px",top:"auto",left:"auto",transform:"none"};case"banner_top":return{top:`${t}px`,left:"0px",right:"auto",bottom:"auto",transform:"none"};case"banner_bottom":return{bottom:"0px",left:"0px",right:"auto",top:"auto",transform:"none"};default:return{bottom:"15px",right:"15px",left:"auto",top:"auto",transform:"none"}}}const Ve=e=>{const t=e.getBoundingClientRect(),i=y(),n=w(),s=O(),o=document.body.scrollWidth;return{top:t.top+i,bottom:t.top+t.height+i,left:t.left+n,right:t.left+t.width+n,width:t.width,height:t.height,pageWidth:o,pageHeight:s}},je=e=>{const{top:t}=e.getBoundingClientRect();return t>0&&t<window.innerHeight},Ge=class{constructor(e,t,i=!1){this.elementData=t,this.stepType=e.type||g.STEP_TYPES.HIGHLIGHT,this.step=e,this.isSuppressed=i,this.element=null,this.animation=null,this.hotspot=null,this.fiveElements=null,this.highestScore=0,this.finderDelay=null,this.finderLoop=null,this.finderTimeout=!1,this.finderCleared=!1,this.findResponse=null,this.clickListener=null,this.entryListener=null,this.nextListener=null,this.scrollListener=null,this.windowResizeListener=null}sendErrorResponse(e){new A({type:g.MESSAGE_TYPES.STEP_HAS_ERROR,payload:{stepId:this.step.randomWorkflowStepId,reasons:e}}).generateResponse()({})}find(e){setTimeout((()=>{this.finderTimeout=!0,this.findResponse.hasError&&this.sendErrorResponse(this.findResponse.reasons)}),3e3),this.nextListener=e;const t=(e,n)=>{let s=!1;this.findResponse=E(this.elementData,this.step.matchingAttributes),this.finderCleared||(this.findResponse.success&&this.findResponse.score>=this.highestScore&&(this.element&&this.element==this.findResponse.suspect||(s=!0,this.element&&(this.isSuppressed||this.removeStyle(),this.removeListeners()),this.element=this.findResponse.suspect,this.highestScore=this.findResponse.score,this.isSuppressed||(this.applyStyle(),this.stepType!==g.STEP_TYPES.HOTSPOT&&this.step.autoscroll&&setTimeout((()=>this.scrollIntoView()),200)),this.setClickListener(n),k(this.element.tagName)&&this.setEntryListener(n))),this.element?(this.finderDelay=null,this.finderTimeout||(this.finderLoop=i.g.setTimeout((()=>t(e,n)),200)),this.findResponse.score>this.highestScore&&!0===s&&e(this.element)):this.finderCleared?this.finderDelay=null:this.findResponse.success?this.finderDelay=i.g.setTimeout((()=>t(e,n)),500):this.findResponse.hasError&&this.findResponse.reasons.length&&"none"===this.findResponse.reasons[0]&&(this.finderTimeout?e():(this.applyStyle(),this.finderDelay=i.g.setTimeout((()=>t(e,n)),500))))};return new Promise((i=>t(i,e)))}clearFinder(){this.finderCleared=!0,clearTimeout(this.finderLoop),this.finderLoop=null,clearTimeout(this.finderDelay),this.finderDelay=null}applyStyle(){switch(this.step.includeOverlay&&window.LOUOverlay.show(this.element,this.step.overlayOpacity),this.stepType){case g.STEP_TYPES.HIGHLIGHT:this.applyHighlightStyle();break;case g.STEP_TYPES.TOOLTIP:this.applyTooltipStyle();break;case g.STEP_TYPES.HOTSPOT:this.applyHotspotStyle()}}removeStyle(){switch(this.stepType){case g.STEP_TYPES.HIGHLIGHT:this.removeHighlightStyle();break;case g.STEP_TYPES.TOOLTIP:this.removeTooltipStyle();break;case g.STEP_TYPES.HOTSPOT:this.removeHotspotStyle()}}applyHighlightStyle(){const e=U(),t=Object.assign(Object.assign({top:"auto",left:"auto",bottom:"auto",right:"auto"},Be(this.step.placement)),{maxWidth:parseFloat(this.step.width)+10+"px",maxHeight:"700px",zIndex:se});x(Object.assign({},t),e),this.animation=new class{constructor(e,t="#228AF2"){this.element=e,this.color=t,this.tintColor=P(t,120),this.textColor=W(t,160),this.originalBackground=e.style.background||e.style.backgroundColor,this.originalTextColor=e.style.color,this.interval=null,this.switch=!1}blink(e){e&&(this.color=e,this.tintColor=P(e,120),this.textColor=W(e,160)),this.element.style.transitionDuration="550ms",this.element.style.color=this.textColor,this.switch=!0,this.interval=setInterval((()=>{this.switch?(this.element.style.background=this.color,this.switch=!1):(this.element.style.background=this.tintColor,this.switch=!0)}),600)}clearBlink(){clearInterval(this.interval),this.element.style.background=this.originalBackground,this.element.style.color=this.originalTextColor,this.interval=null,this.switch=!1}highlight(){this.element.style.background=this.color,this.element.style.color=this.textColor}clearHighlight(){this.element.style.background=this.originalBackground,this.element.style.color=this.originalTextColor}}(this.element,this.step.elementHighlightColor),this.step.includeElementHighlightBlinkAnimation?this.animation.blink():this.animation.highlight()}applyTooltipStyle(){setTimeout((()=>{this.adjustTooltipPosition(!0),this.setWindowResizeListener(),this.setScrollListener(),this.setResizeObserver()}),100)}adjustTooltipPosition(e=!1){const t=U(),i=this.element&&((e,t,i=Ce.Left)=>{const n=t.getBoundingClientRect();if(0===n.width&&0===n.height&&0===n.top&&0===n.left)return null;const s=e.getBoundingClientRect(),o=w(),r=y();let a=o+n.right,l=r+n.top+(n.bottom-n.top)/2;const c=f(),d=O(),p=document.body.clientWidth,h=10,_=10,u=24;let m,E,T,g;const L=()=>!(r+n.bottom+_+s.height+h>d||(l=r+n.bottom,a=o+n.left+(n.right-n.left)/2,E=Math.min(Math.max(h,a-s.width/2),p-s.width-h),m=l+_,g=Math.min(Math.max(a-(E+s.width/2),-1*(s.width/2-u)),s.width/2-u),T=Ce.Top,0)),S=()=>!(_+s.height+h+c>r+n.top||(l=r+n.top,a=o+n.left+(n.right-n.left)/2,E=Math.min(Math.max(h,a-s.width/2),p-s.width-h),m=l-_-s.height,g=Math.min(Math.max(a-(E+s.width/2),-1*(s.width/2-u)),s.width/2-u),T=Ce.Bottom,0)),I=()=>!(a>p-_-s.width-h||(m=Math.min(Math.max(h+c,l-s.height/2),d-s.height-h),E=a+_,g=Math.min(Math.max(l-(m+s.height/2),-1*(s.height/2-u)),s.height/2-u),T=Ce.Left,0)),R=()=>!(_+s.width+h>o+n.left||(a=o+n.left,m=Math.min(Math.max(h+c,l-s.height/2),d-s.height-h),E=a-_-s.width,g=Math.min(Math.max(l-(m+s.height/2),-1*(s.height/2-u)),s.height/2-u),T=Ce.Right,0));let v;switch(i){case Ce.Top:v=[L,S,I,R];break;case Ce.Bottom:v=[S,L,I,R];break;case Ce.Left:v=[I,R,S,L];break;case Ce.Right:v=[R,I,S,L]}for(let e=0;e<v.length&&!v[e]();e++);return{top:Math.max(5,m),left:Math.max(5,E),caretDirection:T,caretPosition:g}})(t,this.element,this.step.caretDirection);if(i){const{top:e,left:n,caretDirection:s,caretPosition:o}=i,r={position:"absolute",left:n+"px",top:e+"px",bottom:"auto",right:"auto",maxWidth:parseFloat(this.step.width)+21+"px",maxHeight:"700px",zIndex:se,transform:"none"};x(r,t),this.step.includeOverlay&&window.LOUOverlay.updatePosition(this.element),new A({type:g.MESSAGE_TYPES.SET_TOOLTIP_STYLE,payload:{caretDirection:s,caretPosition:o}}).send()}else{const i=Object.assign(Object.assign({position:"absolute"},e?Be(this.step.placement):{}),{maxWidth:parseFloat(this.step.width)+21+"px",maxHeight:"700px",zIndex:se});x(i,t)}}applyHotspotStyle(){const{width:e,caretDirection:t,elementHighlightColor:i,element:{position:n}}=this.step;this.hotspot=new class{constructor(e){this.elementId="lou__hotspot",this.waypoint=null,this.waypointContainer=null,this.reference=null,this.parent=null,this.tooltipIsActive=!1,this.tooltipIframe=U(),this.position=e.position,this.color=e.elementHighlightColor,this.stepWidth=e.width,this.caretDirection=e.caretDirection,this.stylesheet=null,this.stylesheetId="lou__hotspot-stylesheet",this.scrollListener=null,this.windowResizeListener=null,this.mouseOverWaypointListener=()=>this.handleMouseOverWaypoint(),this.init()}init(){this.createWaypoint(),this.hideTooltip(),this.setInvisible(),this.mountStylesheet(),this.mountHotspot(),this.setPosition(),this.setPositionListeners(),this.setHoverListeners(),this.setVisible()}createWaypoint(){this.waypointContainer=document.createElement("div"),this.waypointContainer.id=this.elementId+"__container",this.waypoint=document.createElement("span"),this.waypoint.id=this.elementId,this.waypointContainer.appendChild(this.waypoint)}mountHotspot(){if(this.tooltipIsActive=!1,this.reference&&this.reference.success||(this.reference=E(this.position.reference)),this.reference.success){const e=S(this.reference.suspect);e&&("static"===getComputedStyle(e,null).getPropertyValue("position")&&(e.style.position="relative"),e.appendChild(this.waypointContainer),this.parent=e)}}unmountHotspot(){this.hideTooltip();try{this.parent.removeChild(this.waypointContainer)}catch(e){}}hide(){this.waypoint.style.display="none"}show(){this.waypoint.style.display="flex"}setVisible(){this.waypoint.style.opacity="1"}setInvisible(){this.waypoint.style.opacity="0"}handleMouseOverWaypoint(){this.showTooltip(),this.cleanupHoverListeners()}showTooltip(){this.tooltipIsActive=!0,this.setInvisible(),x(Object.assign(Object.assign({},ae.VISIBLE),{maxWidth:parseFloat(this.stepWidth)+21+"px"}),this.tooltipIframe).then((()=>{const{top:e,left:t,caretDirection:i,caretPosition:n}=He(this.tooltipIframe,this.waypoint,this.caretDirection);x({left:t+"px",top:e+"px"},this.tooltipIframe),new A({type:g.MESSAGE_TYPES.SET_TOOLTIP_STYLE,payload:{caretDirection:i,caretPosition:n}}).send()}))}hideTooltip(){this.tooltipIsActive=!1,x(Object.assign({},ae.HIDDEN),this.tooltipIframe)}updateTooltipPosition(){const{top:e,left:t,caretDirection:i,caretPosition:n}=He(this.tooltipIframe,this.waypoint,this.caretDirection);x({left:t+"px",top:e+"px"},this.tooltipIframe),new A({type:g.MESSAGE_TYPES.SET_TOOLTIP_STYLE,payload:{caretDirection:i,caretPosition:n}}).send()}mountStylesheet(){const e=(t=this.elementId,i=this.color,`\n  #${t}__container {\n    position: absolute !important;\n    width: 30px !important;\n    height: 30px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    margin: 0 !important;\n    padding: 0 !important;\n  }\n\n  #${t} {\n    position: absolute !important;\n    height: 18px !important;\n    width: 18px !important;\n    border-radius: 50% !important;\n    transform: translateX(-50%) translateY(-50%);\n    -webkit-transform: translateX(-50%) translateY(-50%);\n    -moz-transform: translateX(-50%) translateY(-50%);\n    -ms-transform: translateX(-50%) translateY(-50%);\n    -o-transform: translateX(-50%) translateY(-50%);\n    animation: ${g.IDS.CSS.HOTSPOT_PULSE_ANIMATION} 4s infinite linear !important;\n    transition-duration: 200ms;\n    text-align: center !important;\n    display: flex;\n    align-items: center !important;\n    justify-content: center !important;\n    background-color: ${i};\n  }\n\n  #${t}:before {\n    position: absolute;\n    content: '';\n    height: 18px;\n    width: 18px;\n    left: 0;\n    top: 0;\n    background-color: transparent;\n    border-radius: 50%;\n    box-shadow: 0px 0px 1px 1px ${i};\n    animation: ${g.IDS.CSS.HOTSPOT_RING_ANIMATION} 4s infinite linear;\n  }\n\n  @keyframes ${g.IDS.CSS.HOTSPOT_PULSE_ANIMATION} {\n      0% {\n        transform: scale(0.4);\n        -webkit-transform: scale(0.4);\n        -moz-transform: scale(0.4);\n        -ms-transform: scale(0.4);\n        -o-transform: scale(0.4);\n      }\n      8% {\n        transform: scale(0.7);\n        -webkit-transform: scale(0.7);\n        -moz-transform: scale(0.7);\n        -ms-transform: scale(0.7);\n        -o-transform: scale(0.7);\n      }\n      16% {\n        transform: scale(0.5);\n        -webkit-transform: scale(0.5);\n        -moz-transform: scale(0.5);\n        -ms-transform: scale(0.5);\n        -o-transform: scale(0.5);\n      }\n      25% {\n        transform: scale(1.0);\n        -webkit-transform: scale(1.0);\n        -moz-transform: scale(1.0);\n        -ms-transform: scale(1.0);\n        -o-transform: scale(1.0);\n      }\n      27% {\n        transform: scale(1.0);\n        -webkit-transform: scale(1.0);\n        -moz-transform: scale(1.0);\n        -ms-transform: scale(1.0);\n        -o-transform: scale(1.0);\n      }\n      31% {\n        transform: scale(0.85);\n        -webkit-transform: scale(0.85);\n        -moz-transform: scale(0.85);\n        -ms-transform: scale(0.85);\n        -o-transform: scale(0.85);\n      }\n      35% {\n        transform: scale(1.0);\n        -webkit-transform: scale(1.0);\n        -moz-transform: scale(1.0);\n        -ms-transform: scale(1.0);\n        -o-transform: scale(1.0);\n      }\n      59% {\n        transform: scale(1.0);\n        -webkit-transform: scale(1.0);\n        -moz-transform: scale(1.0);\n        -ms-transform: scale(1.0);\n        -o-transform: scale(1.0);\n      }\n      63% {\n        transform: scale(0.85);\n        -webkit-transform: scale(0.85);\n        -moz-transform: scale(0.85);\n        -ms-transform: scale(0.85);\n        -o-transform: scale(0.85);\n      }\n      67% {\n        transform: scale(1.0);\n        -webkit-transform: scale(1.0);\n        -moz-transform: scale(1.0);\n        -ms-transform: scale(1.0);\n        -o-transform: scale(1.0);\n      }\n      90% {\n        transform: scale(1.0);\n        -webkit-transform: scale(1.0);\n        -moz-transform: scale(1.0);\n        -ms-transform: scale(1.0);\n        -o-transform: scale(1.0);\n      }\n      100% {\n        transform: scale(0.4);\n        -webkit-transform: scale(0.4);\n        -moz-transform: scale(0.4);\n        -ms-transform: scale(0.4);\n        -o-transform: scale(0.4);\n      }\n  }\n\n  @keyframes ${g.IDS.CSS.HOTSPOT_RING_ANIMATION} {\n      0%{\n        transform:scale(0.95);\n        -webkit-transform:scale(0.95);\n        -moz-transform:scale(0.95);\n        -ms-transform:scale(0.95);\n        -o-transform:scale(0.95);\n        opacity:1;\n      }\n      29%{\n        transform:scale(0.95);\n        -webkit-transform:scale(0.95);\n        -moz-transform:scale(0.95);\n        -ms-transform:scale(0.95);\n        -o-transform:scale(0.95);\n        opacity:1;\n      }\n      56%{\n        transform:scale(2.5);\n        -webkit-transform:scale(2.5);\n        -moz-transform:scale(2.5);\n        -ms-transform:scale(2.5);\n        -o-transform:scale(2.5);\n        opacity:0;\n      }\n      60%{\n        transform:scale(0.95);\n        -webkit-transform:scale(0.95);\n        -moz-transform:scale(0.95);\n        -ms-transform:scale(0.95);\n        -o-transform:scale(0.95);\n        opacity:0;\n      }\n      61% {\n        transform:scale(0.95);\n        -webkit-transform:scale(0.95);\n        -moz-transform:scale(0.95);\n        -ms-transform:scale(0.95);\n        -o-transform:scale(0.95);\n        opacity:1;\n      }\n      88% {\n        transform:scale(2.5);\n        -webkit-transform:scale(2.5);\n        -moz-transform:scale(2.5);\n        -ms-transform:scale(2.5);\n        -o-transform:scale(2.5);\n        opacity:0;\n      }\n      100%{\n        opacity:0;\n      }\n  }`);var t,i;this.stylesheet=document.createElement("style"),this.stylesheet.type="text/css",this.stylesheet.id=this.stylesheetId,this.stylesheet.appendChild(document.createTextNode(e)),document.head.appendChild(this.stylesheet)}unmountStylesheet(){if(this.stylesheet){this.stylesheet.disabled=!0;try{this.stylesheet.parentNode.removeChild(this.stylesheet)}catch(e){}this.stylesheet=null}else{const e=document.getElementById(this.stylesheetId);if(e){e.disabled=!0;try{e.parentNode.removeChild(e)}catch(e){}this.stylesheet=null}}}setPosition(){if(this.reference){const e=E(this.position.reference);if(e.success&&e.suspect!=this.parent&&this.waypoint.parentNode==this.parent){try{this.parent.removeChild(this.waypoint)}catch(e){}this.reference=e,this.mountHotspot()}}if(this.reference.success){const{width:e,height:t}=this.parent.getBoundingClientRect(),{isOffsetBottom:i,isOffsetRight:n,offsetTop:s,offsetBottom:o,offsetLeft:r,offsetRight:a}=this.position.offsetPosition;this.waypointContainer.style.top=i?t+o+"px":0-s-18+"px",this.waypointContainer.style.left=n?e+a+"px":0-r-18+"px"}}setPositionListeners(){this.setWindowResizeListener(),this.setScrollListener()}setHoverListeners(){this.waypoint.addEventListener("mouseover",this.mouseOverWaypointListener)}setWindowResizeListener(){this.windowResizeListener=(0,Oe.throttle)(200,!1,(()=>this.setPosition())),window.addEventListener("resize",this.windowResizeListener)}setScrollListener(){this.scrollListener=(0,Oe.throttle)(200,!1,(()=>this.setPosition())),document.addEventListener("scroll",this.scrollListener);const e=D(this.reference.suspect);e&&e.addEventListener("scroll",this.scrollListener)}cleanupPositionListeners(){window.removeEventListener("resize",this.windowResizeListener),document.removeEventListener("scroll",this.scrollListener);const e=D(this.reference.suspect);e&&e.removeEventListener("scroll",this.scrollListener)}cleanupHoverListeners(){this.waypoint.removeEventListener("mouseover",this.mouseOverWaypointListener)}cleanup(){this.cleanupPositionListeners(),this.cleanupHoverListeners(),this.unmountHotspot(),this.unmountStylesheet()}}({elementHighlightColor:i,position:n,width:e,caretDirection:t})}removeHighlightStyle(){this.animation&&(this.animation.interval||this.step.includeElementHighlightBlinkAnimation?this.animation.clearBlink():this.animation.clearHighlight(),this.animation=null)}removeTooltipStyle(){const e=U();x(re.ACTIVE_TUTORIAL_FRAME,e)}removeHotspotStyle(){this.hotspot&&(this.hotspot.cleanup(),this.hotspot=null)}scrollIntoView(){const e=U();if(this.element&&(!je(this.element)||!je(e))){const t=this.element.getBoundingClientRect().top,i=e.getBoundingClientRect().top,n=t>i&&this.stepType===g.STEP_TYPES.TOOLTIP?i:t,s=window.scrollY+n-150,o=I(this.element);o.scrollTo({top:s,behavior:"smooth"}),setTimeout((()=>{s>5&&o.scrollTop<5&&o.scrollTo({top:s})}),200)}}setWindowResizeListener(){this.windowResizeListener=(0,Oe.throttle)(200,!1,(()=>this.adjustTooltipPosition())),window.addEventListener("resize",this.windowResizeListener)}setScrollListener(){if(this.scrollListener=(0,Oe.throttle)(200,!1,(()=>this.adjustTooltipPosition())),document.addEventListener("scroll",this.scrollListener),this.element){const e=I(this.element);e&&e.addEventListener("scroll",this.scrollListener)}}setResizeObserver(){this.resizeObserver=new ResizeObserver((0,Oe.throttle)(200,!1,(()=>{this.adjustTooltipPosition()}))),this.element&&B(this.element)&&(this.resizeObserver.observe(this.element),this.element.parentNode&&B(this.element.parentNode)&&(this.resizeObserver.observe(this.element.parentNode),this.element.parentNode.parentNode&&B(this.element.parentNode.parentNode)&&(this.resizeObserver.observe(this.element.parentNode.parentNode),this.element.parentNode.parentNode.parentNode&&B(this.element.parentNode.parentNode.parentNode)&&(this.resizeObserver.observe(this.element.parentNode.parentNode.parentNode),this.element.parentNode.parentNode.parentNode.parentNode&&B(this.element.parentNode.parentNode.parentNode.parentNode)&&this.resizeObserver.observe(this.element.parentNode.parentNode.parentNode.parentNode)))))}removeListeners(){if(this.removeClickListener(),this.removeEntryListener(),this.stepType===g.STEP_TYPES.TOOLTIP){this.windowResizeListener&&window.removeEventListener("resize",this.windowResizeListener),this.scrollListener&&document.removeEventListener("scroll",this.scrollListener);const e=I(this.element);this.scrollListener&&e&&e.removeEventListener("scroll",this.scrollListener),this.windowResizeListener=null,this.scrollListener=null}}removeObservers(){this.stepType===g.STEP_TYPES.TOOLTIP&&(this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null)}setClickListener(e){if(this.element){this.clickListener=e;let t=!1;if(this.element.parentNode)try{const e=this.element.getBoundingClientRect(),i=this.element.parentNode.getBoundingClientRect();t=Math.abs(e.width-i.width)<5&&Math.abs(e.height-i.height)<5}catch(e){}t?this.element.parentNode.addEventListener("click",this.clickListener,{capture:!0}):this.element.addEventListener("click",this.clickListener,{capture:!0})}}removeClickListener(){if(this.clickListener)try{this.element.parentNode&&this.element.parentNode.removeEventListener("click",this.clickListener,{capture:!0}),this.element.removeEventListener("click",this.clickListener,{capture:!0})}catch(e){}this.clickListener=null}setEntryListener(e){this.element&&(this.entryListener=e,this.element.addEventListener("keypress",this.entryListener))}removeEntryListener(){this.entryListener&&this.element.removeEventListener("keypress",this.entryListener),this.entryListener=null}clearElement(){this.element=null,this.highestScore=0}},$e={top:"auto",left:"auto",bottom:"15px",right:"15px",maxWidth:"min(calc(100vw - 20px), 360px)",maxHeight:"660px",zIndex:se,transform:"none"},Ye=(e,t)=>{var i;const n=[];if(!e)return[e,n];const s=e.match(/\{\{([^}]+)\}\}/g);if(!s)return[e,n];let o=e;for(let e=0;e<s.length;e++){const r=s[e],a=r.replace("{{","").replace("}}","").trim().split("|");let l="";for(let e=0;e<a.length;e++){const n=a[e];if(n.includes("default:")){l=n.replace("default:","").trim().slice(1,-1);break}{const e=n.split(".");if("user"===(null==e?void 0:e[0])){const n=null===(i=null==t?void 0:t.customUserProperties)||void 0===i?void 0:i[(null==e?void 0:e[1])||""];if(n){l=n.toString();break}}}}n.push({offset:o.search(r),oldLength:r.length,newLength:l.length}),o=o.replace(r,l)}return[o,n]};var Fe;!function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right",e.TopLeftRadius="topLeftRadius",e.TopRightRadius="topRightRadius",e.BottomLeftRadius="bottomLeftRadius",e.BottomRightRadius="bottomRightRadius"}(Fe||(Fe={}));const ze=300,Ke="lou_tour_step_overlay_element",Xe=e=>new Promise((t=>setTimeout(t,e))),Je=e=>{const t=e=>{(e.deltaX||e.deltaY)&&(e=>{const{clientX:t,clientY:i,deltaX:n,deltaY:s}=e,o=document.elementsFromPoint(t,i);o[o.length-2]!==document.body&&o.splice(-1,0,document.body),o[o.length-1]!==document.documentElement&&o.push(document.documentElement);for(let e=o.length-1;e>=0;e--){const t=o[e];if("hidden"!==getComputedStyle(t,null).overflow){const e=t.scrollTop+s,i=t.scrollLeft+n;(t!==document.documentElement||e<=t.clientHeight-window.innerHeight)&&(t.scrollTop=e),(t!==document.documentElement||i<=t.clientWidth-window.innerWidth)&&(t.scrollLeft=i)}}})(e)};return e&&e.addEventListener("wheel",t,{passive:!0}),t},qe=(e={})=>{const t=document.createElement("div");return t.className=Ke,x(Object.assign(Object.assign({},{zIndex:"2147483647",width:"0",height:"0",top:"0",left:"0",opacity:"0",transition:"unset"}),e),t),{element:t,listener:Je(t)}},Ze=(e={})=>{const t=document.createElement("div");return t.className=Ke,x(Object.assign(Object.assign({},{position:"absolute",zIndex:"2147483647",width:"0",height:"0",top:"0",left:"0",opacity:"0",transition:"unset",pointerEvents:"none"}),e),t),{element:t,listener:Je(t)}},Qe=e=>{const t=Ve(e),i=t.bottom-t.top,n=t.right-t.left,s=t.top+i/2,o=t.left+n/2,r=document.body.style.paddingTop,a={position:"absolute",backgroundColor:"#000000"},l={width:"0px",height:"0px"};return{[Fe.Top]:Object.assign(Object.assign({},a),{top:r||"0px",left:"0px",width:`${t.pageWidth}px`,height:(s>0?s-(parseInt(r,10)||0):0)+"px"}),[Fe.Bottom]:Object.assign(Object.assign({},a),{top:`${s}px`,left:"0px",width:`${t.pageWidth}px`,height:(s<t.pageHeight?t.pageHeight-s:0)+"px"}),[Fe.Left]:Object.assign(Object.assign({},a),{top:`${s}px`,left:"0px",width:`${o}px`,height:"0px"}),[Fe.Right]:Object.assign(Object.assign({},a),{top:`${s}px`,left:`${o}px`,width:t.pageWidth-o+"px",height:"0px"}),[Fe.TopLeftRadius]:Object.assign(Object.assign(Object.assign(Object.assign({},a),{backgroundColor:"transparent"}),l),{top:`${t.top}px`,left:`${t.left}px`}),[Fe.TopRightRadius]:Object.assign(Object.assign(Object.assign(Object.assign({},a),{backgroundColor:"transparent"}),l),{top:`${t.top}px`,left:`${t.right}px`}),[Fe.BottomLeftRadius]:Object.assign(Object.assign(Object.assign(Object.assign({},a),{backgroundColor:"transparent"}),l),{top:`${t.bottom}px`,left:`${t.left}px`}),[Fe.BottomRightRadius]:Object.assign(Object.assign(Object.assign(Object.assign({},a),{backgroundColor:"transparent"}),l),{top:`${t.bottom}px`,left:`${t.right}px`})}};var et=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const tt={segment:{source:"segment",defaultNamespace:"analytics"},google_analytics:{source:"google_analytics",defaultNamespace:"GoogleAnalyticsObject"},amplitude:{source:"amplitude",defaultNamespace:"amplitude"},heap:{source:"heap",defaultNamespace:"heap"},fullstory:{source:"fullstory",defaultNamespace:"_fs_namespace"},mixpanel:{source:"mixpanel",defaultNamespace:"mixpanel"},kissmetrics:{source:"kissmetrics",defaultNamespace:"_kmq"},klaviyo:{source:"klaviyo",defaultNamespace:"_learnq"},localytics:{source:"localytics",defaultNamespace:"ll"},optimizely:{source:"optimizely",defaultNamespace:"optimizely"},smartlook:{source:"smartlook",defaultNamespace:"smartlook"},customer_io:{source:"customer_io",defaultNamespace:"_cio"},woopra:{source:"woopra",defaultNamespace:"woopra"},marketo:{source:"marketo",defaultNamespace:"rtp"}},it=(e,t)=>e&&t?`${e}px - ${t}px`:e?`> ${e}px`:t?`< ${t}px`:"-";var nt;!function(e){e.Completed="completed",e.Exited="exited",e.Started="started"}(nt||(nt={}));const st=C(),ot=!(!st||!st.getAttribute("builder"));let rt=null;function at(){window.LOU=new q(ot),window.LOUMainframeManager=new fe,window.LOUStepManager=new class{constructor(){this.step=null,this.targetElement=void 0,this.sendResponse=null,this.fetchLocation=R("LOU_FETCH_LOCATION")||null,this.latestLocation=R("LOU_LATEST_LOCATION")||null,this.navigating=!1,this.exitOnUnexpectedNavigation=!0,this.includeCelebration=!1,this.nextButtonClicked=!1,this.isControlledRedirect=R("LOU_IS_CONTROLLED_REDIRECT")||!1,this.isControlledRedirectOverride=!1,this.controlledRedirectTimeout=null,this.targetElementClick=e=>this.onTargetElementClick(e),this.targetElementClickListener=this.targetElementClick.bind(this),this.suppressedTargetElementClick=()=>this.onSuppressedTargetElementClick(),this.suppressedTargetElementClickListener=this.suppressedTargetElementClick.bind(this),this.beforeUnloadListener=null,this.locationChangeListener=null,this.windowClickListener=null,this.overlayClickListener=null}initStep(e,t,i){var n,s,o;this.addListeners(),this.cleanup(),this.sendResponse=e=>i(e);const r=(null===(n=null==e?void 0:e.variant)||void 0===n?void 0:n.steps)||(null==e?void 0:e.steps)||[],a=null===(o=(null===(s=null==e?void 0:e.variant)||void 0===s?void 0:s.steps)||(null==e?void 0:e.steps))||void 0===o?void 0:o[t],l=t===r.length-1;if(this.includeCelebration=l&&e.includeCelebration,this.exitOnUnexpectedNavigation=e.exitOnUnexpectedNavigation,this.fetchLocation=R("LOU_FETCH_LOCATION"),this.latestLocation&&window.location.href!==this.latestLocation&&!this.isControlledRedirect||!this.latestLocation&&window.location.href!==this.fetchLocation)new A({type:g.MESSAGE_TYPES.EXIT_TUTORIAL,payload:{eventData:{action:ue.UNINTENDED_LOCATION_CHANGE}}}).send();else{this.latestLocation=window.location.href,v("LOU_LATEST_LOCATION",this.latestLocation),this.step&&this.step.randomWorkflowStepId!==a.randomWorkflowStepId&&!this.navigating&&(this.controlledRedirectTimeout=setTimeout((()=>{this.setIsControlledRedirect(!1),this.controlledRedirectTimeout=null}),1e3)),this.isControlledRedirectOverride&&(this.setIsControlledRedirect(!1),this.isControlledRedirectOverride=!1),this.step=a;const{element:e,type:t,includeOverlay:i,overlayOpacity:n,exitOnOverlayClick:s}=a;if(s&&this.setOverlayClickListener(),e&&t!==g.STEP_TYPES.MODAL&&t!==g.STEP_TYPES.BANNER)try{const n=H(e);let s;s=t===g.STEP_TYPES.HOTSPOT?n.position.reference:n.elementData,this.targetElement=new Ge(a,s),this.initTargetElementStep(),i||window.LOUOverlay.hide()}catch(e){}else this.applyStepStyles(a),i?window.LOUOverlay.show(null,n):window.LOUOverlay.hide()}}initSuppressedStep(e,t){if(this.addSuppressedListeners(),this.cleanup(),this.sendResponse=e=>t(e),this.step=e,e&&e.type!==g.STEP_TYPES.MODAL&&e.type!==g.STEP_TYPES.BANNER&&e.element)try{const t=H(e.element);let i;i=e.type===g.STEP_TYPES.HOTSPOT?t.position.reference:t.elementData,this.targetElement=new Ge(e,i,!0),this.initTargetElementSuppressedStep()}catch(e){}}initTargetElementStep(){switch(this.step.type){case g.STEP_TYPES.HIGHLIGHT:case g.STEP_TYPES.TOOLTIP:this.findElement();break;case g.STEP_TYPES.HOTSPOT:{const e=U();x(Object.assign({},ae.HIDDEN),e),this.findElement();break}}}initTargetElementSuppressedStep(){setTimeout((()=>{this.navigating||!this.targetElement||this.targetElement.element||this.targetElement.find(this.suppressedTargetElementClickListener).then((()=>{this.targetElement.setClickListener(this.suppressedTargetElementClickListener)}))}),300)}findElement(){setTimeout((()=>{this.navigating||!this.targetElement||this.targetElement.element||this.targetElement.find(this.targetElementClickListener).then((()=>{this.targetElement.applyStyle(),this.targetElement.scrollIntoView(),this.targetElement.setClickListener(this.targetElementClickListener),this.targetElement.element&&k(this.targetElement.element.tagName)&&this.targetElement.setEntryListener(this.targetElementClickListener)}))}),300)}cleanup(){this.targetElement&&(this.targetElement.clearFinder(),this.targetElement.removeObservers(),this.targetElement.removeListeners(),this.targetElement.removeStyle(),this.targetElement.clearElement()),this.overlayClickListener&&this.removeOverlayClickListener(),this.controlledRedirectTimeout&&(clearTimeout(this.controlledRedirectTimeout),this.controlledRedirectTimeout=null),this.targetElement=void 0}celebrate(e){this.includeCelebration&&function(e){const t=e.clientX,i=e.clientY+window.scrollY,n=document.createElement("style");n.innerHTML=De,document.body.appendChild(n);const s=document.createElement("div");s.className="LOU__celebration-container",s.style.left=t+"px",s.style.top=i+"px";const o=Me("main",0),r=Me("small_1",1e3),a=Me("small_2",700),l=Me("small_3",900),c=Me("small_4",1200);r.style.transform="translate(-70px, -60px)",a.style.transform="translate(20px, -70px)",l.style.transform="translate(-50px, 10px)",c.style.transform="translate(30px, -20px)",s.appendChild(o),s.appendChild(r),s.appendChild(a),s.appendChild(l),s.appendChild(c),document.body.appendChild(s),setTimeout((()=>{try{document.body.removeChild(n),document.body.removeChild(s)}catch(e){}}),2e3)}(e)}handleStepTrigger(){this.step&&"run_custom_code"===this.step.nextStepTrigger&&new Function(this.step.nextStepTriggerValue)()}triggerNextStep(e){this.targetElement&&this.targetElement.element&&k(this.targetElement.element.tagName)?"keypress"===e.type?(this.handleStepTrigger(),this.cleanup(),this.sendResponse({action:ue.TARGET_ELEMENT_CLICK,targetElementType:me.DATA_ENTRY})):"click"===e.type&&"button"===this.targetElement.element.type&&(this.handleStepTrigger(),this.celebrate(e),this.cleanup(),this.sendResponse({action:ue.TARGET_ELEMENT_CLICK,targetElementType:me.DATA_ENTRY_BUTTON})):(this.handleStepTrigger(),this.celebrate(e),this.cleanup(),this.sendResponse({action:ue.TARGET_ELEMENT_CLICK,targetElementType:me.STATIC}))}onTargetElementClick(e){if(this.setIsControlledRedirect(!0),this.nextButtonClicked)this.celebrate(e),this.cleanup(),this.nextButtonClicked=!1;else switch(this.step.elementClickAction){case Re.None:return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1;case Re.AdvanceStepAndSuppressElementClick:return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),this.triggerNextStep(e),!1;case Re.TriggerElementClickWithoutAdvancingStep:break;case Re.AdvanceStepAndTriggerElementClick:this.triggerNextStep(e)}return null}onSuppressedTargetElementClick(){this.sendResponse({action:ue.TARGET_ELEMENT_CLICK,targetElementType:me.STATIC})}buttonClick(e,t){if(this.setIsControlledRedirect(!0),e&&e[`${t}ButtonAction`])switch(e[`${t}ButtonAction`]){case ye.AdvanceStepAndRedirectToUrl:case ye.PreviousStepAndNavigateToSpecificUrl:case ye.RedirectToUrl:if(this.handleStepTrigger(),e[`${t}ButtonRedirectUrl`]){const[i]=Ye(e[`${t}ButtonRedirectUrl`],Object.assign({},window.LOU.User));window.location.href=i}break;case ye.AdvanceStepAndOpenUrlInNewTab:case ye.OpenUrlInNewTab:if(this.handleStepTrigger(),e[`${t}ButtonRedirectUrl`]){const[i]=Ye(e[`${t}ButtonRedirectUrl`],Object.assign({},window.LOU.User));!function(e){const t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click();try{t.parentNode.removeChild(t)}catch(e){}}(i)}break;case ye.PreviousStepAndNavigateToReferringUrl:{this.handleStepTrigger();const e=window.LOU.User.referrer;e&&(window.location.href=e);break}case ye.AdvanceStepAndTriggerElementClick:if(this.handleStepTrigger(),this.targetElement&&this.targetElement.element){this.nextButtonClicked=!0;try{this.targetElement.element.click()}catch(e){}}break;case ye.AdvanceStepAndSuppressElementClick:case ye.PreviousStep:this.handleStepTrigger();case ye.CloseWorkflow:case ye.NoAction:}}addListeners(){this.beforeUnloadListener=()=>{this.navigating=!0},window.addEventListener("beforeunload",this.beforeUnloadListener),this.locationChangeListener=()=>{this.findElement()},window.addEventListener("locationchange",this.locationChangeListener)}addSuppressedListeners(){this.locationChangeListener=()=>{this.cleanup(),this.removeSuppressedListeners(),this.sendResponse({action:ue.LOCATION_CHANGE,location:window.location.href})},window.addEventListener("locationchange",this.locationChangeListener),this.windowClickListener=e=>{const{id:t,className:i,tagName:n,innerText:s}=e.target,o=this.targetElement&&this.targetElement.element===e.target;this.cleanup(),this.removeSuppressedListeners(),o||this.sendResponse({action:ue.WINDOW_ELEMENT_CLICK,element:{id:t,className:i,tagName:n,innerText:s}})},window.addEventListener("click",this.windowClickListener)}removeSuppressedListeners(){window.removeEventListener("locationchange",this.locationChangeListener),this.locationChangeListener=null,window.removeEventListener("click",this.windowClickListener),this.windowClickListener=null}applyStepStyles(e){const t=U(),i=Be(e.placement),n=Object.assign(Object.assign({},i),{transform:U()===document.webkitFullscreenElement?null:i.transform}),s=e?Object.assign(Object.assign({top:"auto",left:"auto",bottom:"auto",right:"auto"},n),{maxWidth:e.type===g.STEP_TYPES.BANNER?e.width:`min(calc(100vw - 20px), ${parseFloat(e.width)+("tooltip"===e.type?21:10)}px)`,maxHeight:"660px",zIndex:se}):$e;x(Object.assign({},s),t)}setOverlayClickListener(){this.overlayClickListener=()=>{new A({type:g.MESSAGE_TYPES.EXIT_TUTORIAL,payload:{eventData:{action:ue.OVERLAY_CLICK}}}).send()},window.addEventListener("click",this.overlayClickListener)}removeOverlayClickListener(){window.removeEventListener("click",this.overlayClickListener),this.overlayClickListener=null}checkForUncontrolledRedirect(){!this.isControlledRedirect&&this.exitOnUnexpectedNavigation&&new A({type:g.MESSAGE_TYPES.EXIT_TUTORIAL,payload:{eventData:{action:ue.UNINTENDED_LOCATION_CHANGE}}}).send(),this.controlledRedirectTimeout&&clearTimeout(this.controlledRedirectTimeout),this.controlledRedirectTimeout=setTimeout((()=>{this.setIsControlledRedirect(!1),this.controlledRedirectTimeout=null}),1e3)}setIsControlledRedirect(e){this.isControlledRedirect=e,v("LOU_IS_CONTROLLED_REDIRECT",e)}setIsControlledRedirectOverride(){this.isControlledRedirectOverride=!0}},window.LOUWidgetManager=new class{constructor(){this.id=null,this.data=null,this.isMounted=!1,this.isVisible=!1,this.documentObserver=null,this.widgetFrameTransformValue=null}mount(e,t=!1,i=!0){var n,s,o;if(!this.isMounted){if(t){const{defaultUserProperties:t}=(null===(n=window.LOU)||void 0===n?void 0:n.User)||{};null===(s=window.LOU)||void 0===s||s.User.updateSessionUserData({defaultUserProperties:Object.assign(Object.assign({},t),{widgets_history:X(e.randomWidgetId,t.widgets_history)})}),new A({type:"LOU_LAUNCHED_WIDGET",payload:{widgetId:e.randomWidgetId}}).send()}null===(o=window.LOU)||void 0===o||o.User.updateSessionUserData({activeWidgetId:e.randomWidgetId}),this.data=e;const r=`lou__widget--${e.randomWidgetId}`,a=document.createElement("iframe");a.id=r,a.src=`https://viewer.louassist.com/widget/${e.randomWidgetId}?isInitialLaunch=${t}&includeSegmentation=${i}`,a.setAttribute("allowFullScreen",""),x(Object.assign({position:"fixed",right:"20px",bottom:"20px",top:"auto",left:"auto",width:"100%",height:"500px",maxWidth:"min(calc(100vw - 20px), 470px)",zIndex:"2147483647",borderRadius:"6px",display:"block",visibility:"hidden",opacity:"0"},oe),a,{}),document.body?document.getElementById(r)||document.body.appendChild(a):(this.documentObserver=new MutationObserver((function(){document.body&&(document.getElementById(r)||document.body.appendChild(a),this.documentObserver.disconnect())})),this.documentObserver.observe(document.documentElement,{childList:!0})),this.id=r,this.isMounted=!0,document.addEventListener("turbolinks:render",(()=>{document.body&&!document.getElementById(r)&&document.body.appendChild(a)})),window.addEventListener("webkitfullscreenchange",(()=>{const e=this.getFrame();document.webkitFullscreenElement===e?(this.widgetFrameTransformValue=e.style.transform,e.style.transform=null):!e.style.transform&&this.widgetFrameTransformValue&&(e.style.transform=this.widgetFrameTransformValue,this.widgetFrameTransformValue=null)}))}}unmount(){var e;if(this.isMounted){const e=this.getFrame();if(e)try{e.parentNode.removeChild(e)}catch(e){}this.documentObserver&&this.documentObserver.disconnect()}this.id=null,this.data=null,this.isMounted=!1,this.isVisible=!1,this.documentObserver=null,null===(e=window.LOU)||void 0===e||e.User.updateSessionUserData({activeWidgetId:null})}getFrame(){return document.getElementById(this.id)}updateFrameSize(e,t){const i=this.getFrame();x({width:e+"px",maxWidth:e+"px",height:t+"px"},i)}updateFramePosition(e){const t=this.getFrame(),{top:i,bottom:n,left:s,right:o,transform:r}=e,a={top:i,bottom:n,left:s,right:o,transform:r},l=Object.assign(Object.assign({},a),{transform:this.getFrame()===document.webkitFullscreenElement?null:a.transform});x(l,t)}updateFrameVisibility(e,t){this.isVisible=e;const i=this.getFrame();e?x({display:"block",visibility:"visible"},i).then((()=>{setTimeout((()=>{x({opacity:"1"},i).then((()=>{t({})}))}),100)})):x({opacity:"0"},i).then((()=>setTimeout((()=>{x({display:"none",visibility:"hidden"},i).then((()=>{t({})}))}),100)))}},window.LOUOverlay=new class{constructor(){this.updatePosition=e=>et(this,void 0,void 0,(function*(){if(e){if(!this.prevElement){const t=Qe(e);yield this.applyStylesToOverlayItems(t),yield Xe(ze)}const t=(e=>{const t=Ve(e),i=window.getComputedStyle(e),n=t.bottom-t.top,s=t.right-t.left,o=i.getPropertyValue("border-top-left-radius"),r=i.getPropertyValue("border-top-right-radius"),a=i.getPropertyValue("border-bottom-left-radius"),l=i.getPropertyValue("border-bottom-right-radius"),c=document.body.style.paddingTop,d={position:"absolute"},p=t.top>t.pageHeight,h=t.bottom>t.pageHeight,_=(e,t,i)=>{const o=`min(${t}, ${Math.min(s/2,n/2)}px)`;return{width:i?"0px":o,height:i?"0px":o,backgroundColor:"transparent",backgroundImage:`radial-gradient(circle at ${"borderTopLeftRadius"===e||"borderBottomLeftRadius"===e?o:"0px"} ${"borderTopLeftRadius"===e||"borderTopRightRadius"===e?o:"0px"}, rgba(0,0,0,0) ${o}, #000000 ${o})`,backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}};return{[Fe.Top]:Object.assign(Object.assign({},d),{top:c||"0px",left:"0px",width:`${t.pageWidth}px`,height:(p?t.pageHeight-(parseInt(c,10)||0):t.top>0?t.top-(parseInt(c,10)||0):0)+"px"}),[Fe.Bottom]:Object.assign(Object.assign({},d),{top:`${Math.min(t.bottom,t.pageHeight)}px`,left:"0px",width:`${t.pageWidth}px`,height:(h?0:t.pageHeight-t.bottom)+"px"}),[Fe.Left]:Object.assign(Object.assign({},d),{top:`${Math.min(t.top,t.pageHeight)}px`,left:"0px",width:`${t.left}px`,height:`${p?0:h?t.pageHeight-t.top:t.height}px`}),[Fe.Right]:Object.assign(Object.assign({},d),{top:`${Math.min(t.top,t.pageHeight)}px`,left:`${t.right}px`,width:t.pageWidth-t.right+"px",height:`${p?0:h?t.pageHeight-t.top:t.height}px`}),[Fe.TopLeftRadius]:Object.assign(Object.assign(Object.assign({},d),_("borderTopLeftRadius",o,p)),{top:`${p?t.pageHeight:t.top}px`,left:`${t.left}px`}),[Fe.TopRightRadius]:Object.assign(Object.assign(Object.assign({},d),_("borderTopRightRadius",r,p)),{top:`${p?t.pageHeight:t.top}px`,left:`max(calc(${t.right}px - ${r}), calc(${t.right}px - min(${r}, ${Math.min(s/2,n/2)}px))`}),[Fe.BottomLeftRadius]:Object.assign(Object.assign(Object.assign({},d),_("borderBottomLeftRadius",a,h)),{top:h?`${t.pageHeight}px`:`calc(${t.bottom}px - min(${a}, ${Math.min(s/2,n/2)}px))`,left:`${t.left}px`}),[Fe.BottomRightRadius]:Object.assign(Object.assign(Object.assign({},d),_("borderBottomRightRadius",l,h)),{top:h?`${t.pageHeight}px`:`calc(${t.bottom}px - min(${l}, ${Math.min(s/2,n/2)}px))`,left:`max(calc(${t.right}px - ${l}), calc(${t.right}px - min(${l}, ${Math.min(s/2,n/2)}px))`})}})(e);yield this.applyStylesToOverlayItems(t)}else{if(this.prevElement){const e=Qe(this.prevElement);yield this.applyStylesToOverlayItems(e),yield Xe(ze)}const e=(()=>{const e=document.body.style.paddingTop;return{[Fe.Top]:{position:"fixed",top:e||"0px",left:"0px",width:"100vw",height:`calc(50vh - ${e||"0px"} / 2)`,backgroundColor:"#000000"},[Fe.Bottom]:{position:"fixed",top:`calc(50vh + ${e||"0px"} / 2)`,left:"0px",width:"100vw",height:`calc(50vh - ${e||"0px"} / 2)`,backgroundColor:"#000000"},[Fe.Left]:{position:"fixed",top:`calc(50vh + ${e||"0px"} / 2)`,left:"0px",width:"50vw",height:"0px",backgroundColor:"#000000"},[Fe.Right]:{position:"fixed",top:`calc(50vh + ${e||"0px"} / 2)`,left:"50vw",width:"50vw",height:"0px",backgroundColor:"#000000"},[Fe.TopLeftRadius]:{position:"absolute",top:`calc(50vh + ${e||"0px"} / 2)`,left:"50vw",width:"0px",height:"0px",backgroundColor:"transparent"},[Fe.TopRightRadius]:{position:"absolute",top:`calc(50vh + ${e||"0px"} / 2)`,left:"50vw",width:"0px",height:"0px",backgroundColor:"transparent"},[Fe.BottomLeftRadius]:{position:"absolute",top:`calc(50vh + ${e||"0px"} / 2)`,left:"50vw",width:"0px",height:"0px",backgroundColor:"transparent"},[Fe.BottomRightRadius]:{position:"absolute",top:`calc(50vh + ${e||"0px"} / 2)`,left:"50vw",width:"0px",height:"0px",backgroundColor:"transparent"}}})();yield this.applyStylesToOverlayItems(e)}this.prevElement=e})),this.show=(e,t=.4)=>et(this,void 0,void 0,(function*(){yield this.updatePosition(e);const i={},n={};Object.values(Fe).forEach((e=>{i[e]={transition:"300ms linear"},n[e]={opacity:`${t}`}})),yield this.applyStylesToOverlayItems(i),yield Xe(ze),yield this.applyStylesToOverlayItems(n)})),this.hide=()=>et(this,void 0,void 0,(function*(){const e={},t={};Object.values(Fe).forEach((i=>{e[i]={opacity:"0"},t[i]={position:"absolute",top:"0",left:"0",width:"0",height:"0",transition:"unset"}})),yield this.applyStylesToOverlayItems(e),yield Xe(ze),yield this.applyStylesToOverlayItems(t)})),this.applyStylesToOverlayItems=e=>et(this,void 0,void 0,(function*(){var t,i,n,s,o,r,a,l;const{overlayItems:c}=this;yield Promise.all([x(e[Fe.Top],null===(t=c[Fe.Top])||void 0===t?void 0:t.element),x(e[Fe.Bottom],null===(i=c[Fe.Bottom])||void 0===i?void 0:i.element),x(e[Fe.Right],null===(n=c[Fe.Right])||void 0===n?void 0:n.element),x(e[Fe.Left],null===(s=c[Fe.Left])||void 0===s?void 0:s.element),x(e[Fe.TopLeftRadius],null===(o=c[Fe.TopLeftRadius])||void 0===o?void 0:o.element),x(e[Fe.TopRightRadius],null===(r=c[Fe.TopRightRadius])||void 0===r?void 0:r.element),x(e[Fe.BottomLeftRadius],null===(a=c[Fe.BottomLeftRadius])||void 0===a?void 0:a.element),x(e[Fe.BottomRightRadius],null===(l=c[Fe.BottomRightRadius])||void 0===l?void 0:l.element)])})),this.overlayItems={},this.element=null,this.prevElement=null,this.windowResizeListener=null}init(){if(0===document.getElementsByClassName(Ke).length){this.overlayItems={[Fe.Top]:qe(),[Fe.Left]:qe(),[Fe.Right]:qe(),[Fe.Bottom]:qe(),[Fe.TopLeftRadius]:Ze(),[Fe.TopRightRadius]:Ze(),[Fe.BottomLeftRadius]:Ze(),[Fe.BottomRightRadius]:Ze()};const e=U();Object.keys(this.overlayItems).forEach((t=>{document.body.insertBefore(this.overlayItems[t].element,e)}))}}cleanup(){Object.values(this.overlayItems).forEach((({element:e,listener:t})=>{e.removeEventListener("wheel",t),e.remove()}));const e=document.getElementsByClassName(Ke);Array.from(e).forEach((e=>{e.remove()})),this.overlayItems={},this.prevElement=null}},window.LOULocationChangeInitiated||(window.LOULocationChangeInitiated=!0,G())}st&&st.addEventListener("load",(()=>{window.LOUMainframeManager||window.LOUStepManager||at()}));const lt=()=>{window.LOUMainframeManager||window.LOUStepManager||at()};window.addEventListener("load",lt),window.addEventListener("DOMContentLoaded",(()=>{window.removeEventListener("load",lt),at()})),window.LOULocationChangeInitiated||(window.LOULocationChangeInitiated=!0,G()),window.addEventListener("beforeunload",(()=>{new A({type:"UNLOAD"}).send(),J("stopListening")})),window.addEventListener("message",(function(e){var t,i,n,s,o,r,a,l,c,d,p,h,_,u,m,E;const T=new A({});if(T.createFromEvent(e),T.isFromPlayer()){const e=T.sendResponseReady(),m=T.generateResponse(),{type:E,payload:O}=T;switch(E){case g.MESSAGE_TYPES.PLAYER_MOUNTED:{const e=C();e&&e.getAttribute("builder")?null===(i=null===(t=window.LOU)||void 0===t?void 0:t.User)||void 0===i||i.setBuilderIsActive(!0):J("listen","all",(e=>{(e=>{let t;try{t=R("LOU_SUBSCRIPTION_INTEGRATIONS")}catch(e){t=[]}t.forEach((({source:t,sdkNamespace:i})=>{const n=tt[t].defaultNamespace;((e,t,i,n)=>{const s=t.name.replace(/\s+/g,"_").toLowerCase();let o;if(n&&n in window?o=n:i in window&&(o=i),o)switch(e){case tt.segment.source:window[o].track(t.name,Object.assign(Object.assign({},t.data),{category:"Digital Adoption",label:t.primaryField}));break;case tt.google_analytics.source:o===tt.google_analytics.defaultNamespace&&(o=window[o]),window[o]("send","event","Digital Adoption",t.name,t.primaryField);break;case tt.amplitude.source:window[o].getInstance().logEvent(t.name,Object.assign({},t.data));break;case tt.heap.source:window[o].track(t.name,Object.assign({},t.data));break;case tt.fullstory.source:window[o].event(t.name,Object.assign({},t.data));break;case tt.mixpanel.source:window[o].track(t.name,Object.assign({},t.data));break;case tt.kissmetrics.source:window[o].push(["record",t.name,Object.assign({},t.data)]);break;case tt.klaviyo.source:window[o].push(["track",t.name,Object.assign({},t.data)]);break;case tt.localytics.source:window[o]("tagEvent",t.name,Object.assign({},t.data));break;case tt.optimizely.source:window[o].push({type:"event",eventName:t.name,tags:Object.assign({},t.data)});break;case tt.smartlook.source:window[o]("track",t.name,Object.assign({},t.data));break;case tt.customer_io.source:case tt.woopra.source:window[o].track(s,Object.assign({},t.data));break;case tt.marketo.source:window[o]("send","event",{value:[t.name,t.primaryField]})}})(t,e,n,i)}))})(e.detail)})),rt&&(window.LOUMainframeManager.updateWidth(rt),rt=null),J("refresh"),null===(n=window.LOUMainframeManager)||void 0===n||n.setPlayerTheme(),window.LOU.User.activeWidgetId&&!window.LOUWidgetManager.isMounted&&window.LOUWidgetManager.mount({randomWidgetId:window.LOU.User.activeWidgetId}),m({});break}case g.MESSAGE_TYPES.CLOSE_PLAYER:null===(s=window.LOUMainframeManager)||void 0===s||s.close(),m({});break;case g.MESSAGE_TYPES.UPDATE_PLAYER_HEIGHT:window.LOUMainframeManager.updateHeight(O.height),m({});break;case g.MESSAGE_TYPES.UPDATE_PLAYER_WIDTH:window.LOUMainframeManager.updateWidth(O.width.toString()+"px"),e||(rt=`${O.width}`),m({});break;case g.MESSAGE_TYPES.ENTER_TUTORIAL:window.LOUMainframeManager.enterTutorial(O.fetchLocation),m({});break;case"LOU_RUN_WORKFLOW_BY_ID":{const{workflowId:e,startUrl:t}=O;if(t){const i=t.includes("?");window.location.href=`${t}${i?"&":"?"}lou=${e}`}else window.LOU.startTour(e,!1);break}case g.MESSAGE_TYPES.EXIT_TUTORIAL:window.LOUMainframeManager.exitTutorial(),m({});break;case g.MESSAGE_TYPES.UPDATE_LOCATION_HREF:J("navigateTo",O.url),m({});break;case"LOU_REMOVE_LOU_LINK_PARAM":{window.LOUStepManager.setIsControlledRedirect(!0);const e=new URL(window.location.href);e.searchParams.delete("lou"),history.replaceState({},document.title,e.toString()),m({}),window.LOUStepManager.setIsControlledRedirectOverride();break}case g.MESSAGE_TYPES.RUN_TUTORIAL_STEP:window.LOUOverlay.overlayItems.top||window.LOUOverlay.init(),window.LOUStepManager.initStep(O.workflow,O.stepIndex,m);break;case"LOU_RUN_SPLIT_TEST_TRACKING":window.LOUStepManager.initSuppressedStep(O.step,m);break;case g.MESSAGE_TYPES.NEXT_BUTTON_CLICK:window.LOUStepManager.buttonClick(O.step,O.buttonType),m({});break;case g.MESSAGE_TYPES.CLEAR_TUTORIAL:window.LOUStepManager.cleanup(),m({});break;case g.MESSAGE_TYPES.SHOW_TRIGGER:null===(o=window.LOUMainframeManager)||void 0===o||o.show(),m({});break;case g.MESSAGE_TYPES.HIDE_TRIGGER:null===(r=window.LOUMainframeManager)||void 0===r||r.hide(),m({});break;case"LOU_UPDATE_SESSION_USER":null===(l=null===(a=window.LOU)||void 0===a?void 0:a.User)||void 0===l||l.updateSessionUserData(O),O.activeWidgetId&&window.LOUWidgetManager&&!window.LOUWidgetManager.isMounted&&window.LOUWidgetManager.mount({randomWidgetId:O.activeWidgetId}),m({});break;case"LOU_GET_SESSION_USER":window.LOU?m(Object.assign({},window.LOU.User)):m({});break;case"LOU_SAVE_SESSION_USER_TO_STORAGE":null===(d=null===(c=window.LOU)||void 0===c?void 0:c.User)||void 0===d||d.saveSessionUserDataToStorage(),m({});break;case g.MESSAGE_TYPES.ADD_SESSION_USER_PROPERTIES:J("user",O),m({});break;case g.MESSAGE_TYPES.HANDLE_TRIGGER_CLICK:window.LOUMainframeManager.toggle(O.isOpen),m({});break;case g.MESSAGE_TYPES.SET_PLAYER_MODIFICATIONS:window.LOUMainframeManager.setModifications(O.modifications),m({});break;case g.MESSAGE_TYPES.SET_TRIGGER_HIDDEN:window.LOUMainframeManager.setTriggerHidden(O.triggerHidden),m({});break;case"LOU_GET_SCREEN_DIMENSIONS":m({width:window.innerWidth,height:window.innerHeight});break;case"LOU_SET_CUSTOM_EVENT_LISTENERS":ct.init(O.eventListeners),m({});break;case"LOU_MOUNT_WIDGET":window.LOUWidgetManager.mount(O.widget,O.isInitialLaunch);break;case"LOU_UNMOUNT_WIDGET":window.LOUWidgetManager.unmount();break;case"LOU_UPDATE_WIDGET_FRAME_SIZE":{const{width:e,height:t}=O;window.LOUWidgetManager.updateFrameSize(e,t);break}case"LOU_UPDATE_WIDGET_FRAME_POSITION":window.LOUWidgetManager.updateFramePosition(O.widgetFramePosition);break;case"LOU_UPDATE_WIDGET_FRAME_VISIBILITY":window.LOUWidgetManager.updateFrameVisibility(O.isVisible,m);break;case"LOU_TRACK_PLAYER_OPENED_EVENT":new ne(ee.PlayerOpened).dispatch();break;case"LOU_TRACK_PLAYER_CLOSED_EVENT":new ne(ee.PlayerClosed).dispatch();break;case"LOU_TRACK_PLAYER_SEARCHED_EVENT":{const{searchTerm:e}=T.payload;new ne(ee.PlayerSearched,{SEARCH_TERM:e,search_term:e}).dispatch();break}case"LOU_TRACK_WORKFLOW_VIEWED_EVENT":{const{workflow:e,method:t}=T.payload,{variant:i}=e;null===(h=null===(p=window.LOU)||void 0===p?void 0:p.User)||void 0===h||h.updateWorkflowViewHistory(e.randomWorkflowId,nt.Started),new ne(ee.WorkflowViewed,{TOUR_ID:e.randomWorkflowId,TOUR_NAME:e.title,METHOD:t,experience_id:e.randomWorkflowId,experience_title:e.title,experience_type:e.type,experience_variant_id:null==i?void 0:i.randomWorkflowVariantId,experience_variant_description:i&&`${i.type} | ${it(i.screenSizeRangeMinWidth,i.screenSizeRangeMaxWidth)}`,launch_method:t}).dispatch();break}case"LOU_TRACK_WORKFLOW_COMPLETED_EVENT":{const{workflow:e}=T.payload,{variant:t}=e;null===(u=null===(_=window.LOU)||void 0===_?void 0:_.User)||void 0===u||u.updateWorkflowViewHistory(e.randomWorkflowId,nt.Completed),new ne(ee.WorkflowCompleted,{TOUR_ID:e.randomWorkflowId,TOUR_NAME:e.title,experience_id:e.randomWorkflowId,experience_title:e.title,experience_type:e.type,experience_variant_id:null==t?void 0:t.randomWorkflowVariantId,experience_variant_description:t&&`${t.type} | ${it(t.screenSizeRangeMinWidth,t.screenSizeRangeMaxWidth)}`}).dispatch();break}case"LOU_TRACK_WORKFLOW_EXITED_EVENT":{const{workflow:e,stepIndex:t}=T.payload,{variant:i}=e,n=i?i.steps[t]:e.steps[t];new ne(ee.WorkflowExited,{TOUR_ID:e.randomWorkflowId,TOUR_NAME:e.title,TOUR_STEP_REACHED_NUMBER:t+1,TOUR_STEP_REACHED_NAME:null==n?void 0:n.title,experience_id:e.randomWorkflowId,experience_title:e.title,experience_type:e.type,experience_variant_id:null==i?void 0:i.randomWorkflowVariantId,experience_variant_description:i&&`${i.type} | ${it(i.screenSizeRangeMinWidth,i.screenSizeRangeMaxWidth)}`,experience_step_number:t+1,experience_step_title:null==n?void 0:n.title,experience_step_type:null==n?void 0:n.type}).dispatch();break}case"LOU_TRACK_WORKFLOW_STEP_VIEWED_EVENT":{const{workflow:e,stepIndex:t}=T.payload,{variant:i}=e,n=i?i.steps[t]:e.steps[t];new ne(ee.WorkflowStepViewed,{TOUR_ID:e.randomWorkflowId,TOUR_NAME:e.title,TOUR_STEP_COMPLETED_NUMBER:t+1,TOUR_STEP_COMPLETED_NAME:null==n?void 0:n.title,experience_id:e.randomWorkflowId,experience_title:e.title,experience_type:e.type,experience_variant_id:null==i?void 0:i.randomWorkflowVariantId,experience_variant_description:i&&`${i.type} | ${it(i.screenSizeRangeMinWidth,i.screenSizeRangeMaxWidth)}`,experience_step_number:t+1,experience_step_title:null==n?void 0:n.title,experience_step_type:null==n?void 0:n.type}).dispatch();break}case"LOU_TRACK_WORKFLOW_STEP_COMPLETED_EVENT":{const{workflow:e,stepIndex:t}=T.payload,{variant:i}=e,n=i?i.steps[t]:e.steps[t];new ne(ee.WorkflowStepCompleted,{TOUR_ID:e.randomWorkflowId,TOUR_NAME:e.title,TOUR_STEP_COMPLETED_NUMBER:t+1,TOUR_STEP_COMPLETED_NAME:null==n?void 0:n.title,experience_id:e.randomWorkflowId,experience_title:e.title,experience_type:e.type,experience_variant_id:null==i?void 0:i.randomWorkflowVariantId,experience_variant_description:i&&`${i.type} | ${it(i.screenSizeRangeMinWidth,i.screenSizeRangeMaxWidth)}`,experience_step_number:t+1,experience_step_title:null==n?void 0:n.title,experience_step_type:null==n?void 0:n.type}).dispatch();break}case"LOU_TRACK_SURVEY_VIEWED_EVENT":{const{workflow:e,stepIndex:t}=T.payload,{variant:i}=e,n=i?i.steps[t]:e.steps[t];new ne(ee.SurveyViewed,{TOUR_ID:e.randomWorkflowId,TOUR_NAME:e.title,TOUR_STEP_COMPLETED_NUMBER:t+1,TOUR_STEP_COMPLETED_NAME:null==n?void 0:n.title,experience_id:e.randomWorkflowId,experience_title:e.title,experience_type:e.type,experience_variant_id:null==i?void 0:i.randomWorkflowVariantId,experience_variant_description:i&&`${i.type} | ${it(i.screenSizeRangeMinWidth,i.screenSizeRangeMaxWidth)}`,experience_step_number:t+1,experience_step_title:null==n?void 0:n.title,experience_step_type:null==n?void 0:n.type,survey_type:null==n?void 0:n.surveyType}).dispatch();break}case"LOU_TRACK_SURVEY_COMPLETED_EVENT":{const{workflow:e,stepIndex:t,surveyData:i}=T.payload,{variant:n}=e,s=n?n.steps[t]:e.steps[t];new ne(ee.SurveyCompleted,{TOUR_ID:e.randomWorkflowId,TOUR_NAME:e.title,TOUR_STEP_COMPLETED_NUMBER:t+1,TOUR_STEP_COMPLETED_NAME:null==s?void 0:s.title,experience_id:e.randomWorkflowId,experience_title:e.title,experience_type:e.type,experience_variant_id:null==n?void 0:n.randomWorkflowVariantId,experience_variant_description:n&&`${n.type} | ${it(n.screenSizeRangeMinWidth,n.screenSizeRangeMaxWidth)}`,experience_step_number:t+1,experience_step_title:null==s?void 0:s.title,experience_step_type:null==s?void 0:s.type,survey_type:null==s?void 0:s.surveyType,survey_response:null==i?void 0:i.surveyResponse}).dispatch();break}case"LOU_TRACK_SURVEY_EXITED_EVENT":{const{workflow:e,stepIndex:t}=T.payload,{variant:i}=e,n=i?i.steps[t]:e.steps[t];new ne(ee.SurveyExited,{TOUR_ID:e.randomWorkflowId,TOUR_NAME:e.title,TOUR_STEP_COMPLETED_NUMBER:t+1,TOUR_STEP_COMPLETED_NAME:null==n?void 0:n.title,experience_id:e.randomWorkflowId,experience_title:e.title,experience_type:e.type,experience_variant_id:null==i?void 0:i.randomWorkflowVariantId,experience_variant_description:i&&`${i.type} | ${it(i.screenSizeRangeMinWidth,i.screenSizeRangeMaxWidth)}`,experience_step_number:t+1,experience_step_title:null==n?void 0:n.title,experience_step_type:null==n?void 0:n.type,survey_type:null==n?void 0:n.surveyType}).dispatch();break}case"LOU_TRACK_WIDGET_LAUNCHED_EVENT":{const{widget:e}=T.payload;new ne(ee.WidgetLaunched,{WIDGET_ID:e.randomWidgetId,WIDGET_TITLE:e.title,WIDGET_TYPE:"checklist",widget_id:e.randomWidgetId,widget_title:e.title,widget_type:"checklist"}).dispatch();break}case"LOU_TRACK_WIDGET_COMPLETED_EVENT":{const{widget:e}=T.payload;new ne(ee.WidgetCompleted,{WIDGET_ID:e.randomWidgetId,WIDGET_TITLE:e.title,WIDGET_TYPE:"checklist",widget_id:e.randomWidgetId,widget_title:e.title,widget_type:"checklist"}).dispatch();break}case"LOU_TRACK_WIDGET_OPENED_EVENT":{const{widget:e}=T.payload;new ne(ee.WidgetOpened,{WIDGET_ID:e.randomWidgetId,WIDGET_TITLE:e.title,WIDGET_TYPE:"checklist",widget_id:e.randomWidgetId,widget_title:e.title,widget_type:"checklist"}).dispatch();break}case"LOU_TRACK_WIDGET_CLOSED_EVENT":{const{widget:e}=T.payload;new ne(ee.WidgetClosed,{WIDGET_ID:e.randomWidgetId,WIDGET_TITLE:e.title,WIDGET_TYPE:"checklist",widget_id:e.randomWidgetId,widget_title:e.title,widget_type:"checklist"}).dispatch();break}case"LOU_TRACK_WIDGET_BLOCK_COMPLETED_EVENT":{const{widget:e,widgetBlock:t,widgetBlockIndex:i}=T.payload;new ne(ee.WidgetBlockCompleted,{WIDGET_ID:e.randomWidgetId,WIDGET_TITLE:e.title,WIDGET_TYPE:"checklist",WIDGET_BLOCK_NUMBER:i+1,WIDGET_BLOCK_ID:t.id,widget_id:e.randomWidgetId,widget_title:e.title,widget_type:"checklist",widget_block_number:i+1,widget_block_id:t.id}).dispatch();break}}}else if(T.isFromBuilder()){const e=T.generateResponse(),{type:t,payload:i}=T;switch(t){case g.MESSAGE_TYPES.RUN_TUTORIAL_WITH_DATA:i&&i.tutorial&&new A({type:g.MESSAGE_TYPES.RUN_TUTORIAL_WITH_DATA,payload:{tutorial:i.tutorial}}).send(),e({});break;case g.MESSAGE_TYPES.EXIT_TUTORIAL:new A({type:g.MESSAGE_TYPES.EXIT_TUTORIAL}).send(),e({});break;case g.MESSAGE_TYPES.SET_BUILDER_IS_ACTIVE:null===(E=null===(m=window.LOU)||void 0===m?void 0:m.User)||void 0===E||E.setBuilderIsActive(i);break;case g.MESSAGE_TYPES.REFRESH_TUTORIALS:J("refresh"),e({});break;case g.MESSAGE_TYPES.CLEAR_TUTORIAL_VIEWS:J("clearViewHistory"),e({});break;case"LOU_BUILDER_UNMOUNT_WIDGET":window.LOUWidgetManager.unmount()}}else;}));const ct=new class{constructor(){this.listenersData=[],this.listenerCallbacks=[]}init(e){this.removeListenerCallbacks(),this.listenersData=e,e.forEach((e=>{switch(e.action){case T.Click:case T.Hover:this.initEventListener(e);break;case T.PageLoad:this.initPageLoadListener(e)}}))}initEventListener(e){const{success:t,suspect:i}=E(e.targetElement);t&&i&&this.addEventListener(i,e)}initPageLoadListener(e){J("privateTrack",e.eventName,{},{eventSource:"lou_event_listener"})}addEventListener(e,t){const{eventName:i,action:n}=t,s=()=>{J("privateTrack",i,{},{eventSource:"lou_event_listener"})};e.addEventListener(Z(n),s),this.listenerCallbacks.push({element:e,listener:t,callback:s})}removeListenerCallbacks(){this.listenerCallbacks.forEach((({element:e,listener:t,callback:i})=>{e&&e.removeEventListener(Z(t.action),i)})),this.listenerCallbacks=[]}}})()})();